<!-- <xml version="1.0"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title>Shell configuration files</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/htmlize.css" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/bigblow.css" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/hideshow.css" />
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery-1.9.1.min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/bigblow.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/hideshow.js">
</script>
</head>

<body>
  <div id="content">
    <h1 class="title">Shell configuration files</h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li><a href="#sec-1">1. Documentation</a></li>

          <li>
            <a href="#sec-2">2. Startup files</a>

            <ul>
              <li>
                <ul>
                  <li><a href="#sec-2-0-1">2.0.1. What to put where?</a></li>
                </ul>
              </li>

              <li><a href="#sec-2-1">2.1. Note</a></li>
            </ul>
          </li>

          <li><a href="#sec-3">3. Terminals</a></li>

          <li>
            <a href="#sec-4">4. Bash specific</a>

            <ul>
              <li><a href="#sec-4-1">4.1. Profile</a></li>

              <li><a href="#sec-4-2">4.2. Preamble</a></li>

              <li>
                <a href="#sec-4-3">4.3. Variables</a>

                <ul>
                  <li><a href="#sec-4-3-1">4.3.1. Search path</a></li>

                  <li><a href="#sec-4-3-2">4.3.2. Prompt</a></li>

                  <li><a href="#sec-4-3-3">4.3.3. Command history</a></li>

                  <li><a href="#sec-4-3-4">4.3.4. Term</a></li>

                  <li><a href="#sec-4-3-5">4.3.5. Display</a></li>
                </ul>
              </li>

              <li><a href="#sec-4-4">4.4. Code</a></li>

              <li><a href="#sec-4-5">4.5. Next</a></li>

              <li><a href="#sec-4-6">4.6. Source common files</a></li>

              <li><a href="#sec-4-7">4.7. Next</a></li>

              <li><a href="#sec-4-8">4.8. Postamble</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-5">5. Zsh specific</a>

            <ul>
              <li><a href="#sec-5-1">5.1. Examples</a></li>

              <li><a href="#sec-5-2">5.2. Preamble</a></li>

              <li>
                <a href="#sec-5-3">5.3. Variables</a>

                <ul>
                  <li><a href="#sec-5-3-1">5.3.1. Search path</a></li>

                  <li><a href="#sec-5-3-2">5.3.2. Prompt</a></li>

                  <li><a href="#sec-5-3-3">5.3.3. Command history</a></li>

                  <li><a href="#sec-5-3-4">5.3.4. Term</a></li>

                  <li><a href="#sec-5-3-5">5.3.5. Display</a></li>
                </ul>
              </li>

              <li><a href="#sec-5-4">5.4. Aliasing</a></li>

              <li><a href="#sec-5-5">5.5. Ledger</a></li>

              <li><a href="#sec-5-6">5.6. Functions</a></li>

              <li><a href="#sec-5-7">5.7. Source common files</a></li>

              <li><a href="#sec-5-8">5.8. Line Editor</a></li>

              <li><a href="#sec-5-9">5.9. Completion Widgets</a></li>

              <li><a href="#sec-5-10">5.10. Completion System</a></li>

              <li><a href="#sec-5-11">5.11. Zsh Modules</a></li>

              <li><a href="#sec-5-12">5.12. Others</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-6">6. Common</a>

            <ul>
              <li><a href="#sec-6-1">6.1. Preamble</a></li>

              <li><a href="#sec-6-2">6.2. Default editor</a></li>

              <li><a href="#sec-6-3">6.3. Aliases</a></li>

              <li><a href="#sec-6-4">6.4. Emacs / Org</a></li>

              <li><a href="#sec-6-5">6.5. Grep</a></li>

              <li><a href="#sec-6-6">6.6. Pager</a></li>

              <li><a href="#sec-6-7">6.7. GraphicsMagick</a></li>

              <li><a href="#sec-6-8">6.8. MCit tools</a></li>

              <li><a href="#sec-6-9">6.9. Next</a></li>

              <li><a href="#sec-6-10">6.10. Functions</a></li>

              <li><a href="#sec-6-11">6.11. Emacsclient</a></li>

              <li><a href="#sec-6-12">6.12. Other</a></li>

              <li><a href="#sec-6-13">6.13. Postamble</a></li>
            </ul>
          </li>

          <li><a href="#sec-7">7. InputRC</a></li>

          <li><a href="#sec-8">8. Install environment</a></li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1"><span class="section-number-2">1</span> Documentation</h2>

      <div class="outline-text-2" id="text-1">
        <p><a href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf">Zsh
        Reference Card</a></p>
      </div>
    </div>

    <div id="outline-container-sec-2" class="outline-2">
      <h2 id="sec-2"><span class="section-number-2">2</span> Startup files</h2>

      <div class="outline-text-2" id="text-2">
        <p>There are three <b>sorts of shells</b>:</p>

        <ul class="org-ul">
          <li>(interactive) <b>login</b> (for which
          <code>c:/cygwin/etc/profile</code> and <code>.profile</code> are
          read, which sources <code>.bashrc</code> as well)

            <p><b>Note --</b> Launching Cygwin Terminal (login shell) does not
            load <code>.bashrc</code> on its own, it only loads
            <code>.bash_profile</code>. Hence, the need to have a
            <code>.bash_profile</code> sourcing <code>.bashrc</code>…</p>
          </li>

          <li><b>interactive</b> (non-login) (for which <code>.bashrc</code> is
          read)</li>

          <li>normal shell, i.e. one that’s running a <b>script</b> (bash does
          not execute any initialization file in this case!)

            <p><code>$tty</code> is empty.</p>
          </li>
        </ul>

        <p>We just let <code>.profile</code> also read <code>.bashrc</code> and
        put everything in <code>.bashrc</code>.</p>

        <p><b>Read</b> <a href=
        "http://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/">
        Zsh/Bash startup files loading order</a>:</p>

        <ul class="org-ul">
          <li>For bash, put stuff in <code>~/.bashrc</code>, and make
          <code>~/.bash_profile</code> source it.</li>

          <li>For zsh, put stuff in <code>~/.zshrc</code>, which is always
          executed.</li>
        </ul>

        <p>To recover the default bash configuration files, get their copy from
        <code>/etc/skel</code>.</p>

        <p>If you get a couple of “command not found” errors and a corrupt
        prompt at startup, then your <code>.bashrc</code> is probably in
        Windows text format (<code>\r\n</code> line endings). Make sure your
        editor is in Unix format when creating text files.</p>
      </div>

      <div id="outline-container-sec-2-0-1" class="outline-4">
        <h4 id="sec-2-0-1"><span class="section-number-4">2.0.1</span> What to
        put where?</h4>

        <div class="outline-text-4" id="text-2-0-1">
          <p>Login shell runs .profile (or .bash_profile or .bash_login) on
          startup. Set your env variables in there, cuz sub-shells will inherit
          the env vars. Then make .profile run your .bashrc:</p>

          <div class="org-src-container">
            <pre class="src src-sh">
. .bashrc
</pre>
          </div>

          <p>Interactive runs .bashrc. Since it inherits envs, but not aliases,
          put your aliases in this file.</p>

          <p>Shell scripts, cron jobs, and the like, run with a bare shell: no
          bashrc or profiles are run. No kidding you get 4 env vars set, the
          bare minimum. Therefore your PATH won’t work very well so you often
          have to give an abs pathname like in crontab:</p>

          <div class="org-src-container">
            <pre class="src src-sh">
right: 0 0 * * 2 /usr/sbin/apachectl restart
wrong: 0 0 * * 2 apachectl restart
</pre>
          </div>

          <p>From <a href=
          "https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786">
          https://www.linuxquestions.org/questions/linux-general-1/difference-between-normal-shell-and-login-shell-14983/#post4828786</a></p>
        </div>
      </div>

      <div id="outline-container-sec-2-1" class="outline-3">
        <h3 id="sec-2-1"><span class="section-number-3">2.1</span> Note</h3>

        <div class="outline-text-3" id="text-2-1">
          <p>In <code>c:/cygwin/etc/profile</code>,</p>

          <ul class="org-ul">
            <li>
              <code>/usr/local/bin</code> is appended to the
              <code>PATH</code>!!

              <p>And, except when root, it is almost always wrong to have
              <code>/usr/local/bin</code> after any system path.</p>
            </li>

            <li><code>TZ</code> (time zone) is set… which gives wrong times (1
            hour difference) in Emacs when called from
            <code>c:/cygwin/Cygwin.bat</code>!!</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-3" class="outline-2">
      <h2 id="sec-3"><span class="section-number-2">3</span> Terminals</h2>

      <div class="outline-text-2" id="text-3">
        <ul class="org-ul">
          <li><code>dumb</code></li>

          <li><code>cygwin</code></li>

          <li><code>emacs</code></li>

          <li><code>screen</code></li>

          <li><code>xterm</code></li>

          <li><code>xterm-256color</code> (choose this if Emacs looks ugly in a
          terminal)</li>

          <li><code>eterm-color</code></li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-4" class="outline-2">
      <h2 id="sec-4"><span class="section-number-2">4</span> Bash specific</h2>

      <div class="outline-text-2" id="text-4">
        <p>Le <code>!</code> en shell permet plein de trucs sympa.</p>

        <ul class="org-ul">
          <li><code>!!</code> refait la dernière commande</li>

          <li><code>!cmd</code> refait la dernière commande commençant par
          <code>cmd</code></li>

          <li><code>!cmd:p</code> permet de visualiser sans éxecuter la
          dernière commande commençant par <code>cmd</code></li>

          <li><code>!$</code> est le dernier mot du ligne de commande
          précédent</li>

          <li><code>!cmd:$</code> est le dernier mot du dernier ligne de
          commande commençant par <code>cmd</code></li>

          <li><code>!*</code> est l’ensemble de la dernière ligne de commande à
          part le premier mot</li>
        </ul>

        <p>Pourquoi ce dernier est-il utile ? Pense à ceci :</p>

        <div class="org-src-container">
          <pre class="src src-sh">
$ gm convret -size 120x120 input.png -resize 120x120 -draw <span style=
"color: #008000;">"gravity southeast text 0,0 'Dave Neary'"</span> output.jpg
bash: convret: command not found
$ gm convert !*
</pre>
        </div>
      </div>

      <div id="outline-container-sec-4-1" class="outline-3">
        <h3 id="sec-4-1"><span class="section-number-3">4.1</span> Profile</h3>

        <div class="outline-text-3" id="text-4-1">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">User dependent .bash_profile file</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">source the user's .bashrc if it exists</span>
<span style="color: #0000FF;">if</span> [ -f <span style=
"color: #008000;">"${HOME}/.bashrc"</span> ] ; <span style=
"color: #0000FF;">then</span>
  <span style="color: #006FE0;">source</span> <span style=
"color: #008000;">"${HOME}/.bashrc"</span>
<span style="color: #0000FF;">fi</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-2" class="outline-3">
        <h3 id="sec-4-2"><span class="section-number-3">4.2</span>
        Preamble</h3>

        <div class="outline-text-3" id="text-4-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp" id="current-year">
(format-time-string <span style="color: #008000;">"%Y"</span>)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.bashrc --- Bourne Again Shell configuration file (for interactive shells)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copyright (C) 2003-2014 Fabrice Niessen</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Keywords: bash, dotfile, config</span>

<span style="color: #8D8D84;">#    </span><span style=
"color: #8D8D84; font-style: italic;">_               _</span>
<span style="color: #8D8D84;">#   </span><span style=
"color: #8D8D84; font-style: italic;">| |__   __ _ ___| |__  _ __ ___</span>
<span style="color: #8D8D84;">#   </span><span style=
"color: #8D8D84; font-style: italic;">| '_ \ / _` / __| '_ \| '__/ __|</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">_| |_) | (_| \__ \ | | | | | (__</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">(_)_.__/ \__,_|___/_| |_|_|  \___|</span>
<span style="color: #8D8D84;">#</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This file is free software; you can redistribute it and/or</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">modify it under the terms of the GNU General Public License as</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">published by the Free Software Foundation; either version 2 of</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">the License, or (at your option) any later version.</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This file is distributed in the hope that it will be</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">useful, but WITHOUT ANY WARRANTY; without even the implied</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">PURPOSE.  See the GNU General Public License for more details.</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">You should have received a copy of the GNU General Public</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">License along with this file; if not, write to the Free</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">MA 02111-1307, USA.</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Code:</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">modify to taste</span>
</pre>
          </div>

          <p>I think the following is important for tools such as
          <code>rsync</code> (and Emacs Tramp?)…</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">if not running interactively, don't do anything</span>
[[ <span style="color: #008000;">"$-"</span> != *i* ]] &amp;&amp; <span style=
"color: #0000FF;">return</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-3" class="outline-3">
        <h3 id="sec-4-3"><span class="section-number-3">4.3</span>
        Variables</h3>

        <div class="outline-text-3" id="text-4-3"></div>

        <div id="outline-container-sec-4-3-1" class="outline-4">
          <h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> Search
          path</h4>

          <div class="outline-text-4" id="text-4-3-1">
            <p>Where to look for executable files.</p>

            <p>The global search PATH is defined in the file
            `/etc/environment’</p>

            <p>Note that PATH should already be marked as exported, so
            reexporting is not needed.</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">specify the directories that the shell is to look through to find a</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">command. These directories are searched in the order in which they appear.</span>
<span style="color: #0000FF;">for</span> MAYBE_PATH<span style=
"color: #0000FF;"> in</span> <span style=
"color: #008000;">"$HOME/bin"</span> <span style="color: #008000;">\</span>
                  <span style=
"color: #008000;">"$HOME/expect"</span> <span style="color: #008000;">\</span>
                  <span style="color: #008000;">"$HOME/winbin"</span>
<span style="color: #0000FF;">do</span>
    <span style="color: #0000FF;">if</span> [ -d <span style=
"color: #008000;">"$MAYBE_PATH"</span> ]; <span style=
"color: #0000FF;">then</span>
        <span style="color: #BA36A5;">PATH</span>=<span style=
"color: #008000;">"$MAYBE_PATH:$PATH"</span>
    <span style="color: #0000FF;">fi</span>
<span style="color: #0000FF;">done</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">add the current directory as last component in the search path</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">(not to include for root, for security reasons)</span>
<span style="color: #0000FF;">if</span> [ ! <span style=
"color: #008000;">"$(id -u)"</span> = <span style=
"color: #008000;">"0"</span> ]; <span style="color: #0000FF;">then</span>
    <span style="color: #BA36A5;">PATH</span>=<span style=
"color: #008000;">"$PATH:."</span>
<span style="color: #0000FF;">fi</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-4-3-2" class="outline-4">
          <h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span>
          Prompt</h4>

          <div class="outline-text-4" id="text-4-3-2">
            <p>Appearance of the prompt.</p>

            <p>Note <code>\[...\]</code> used by the shell to count proper
            length.</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">*** Controlling the Prompt</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">regular colors</span>
<span style="color: #BA36A5;">green</span>=<span style=
"color: #008000;">"\[\e[0;32m\]"</span>
<span style="color: #BA36A5;">yellow</span>=<span style=
"color: #008000;">"\[\e[0;33m\]"</span>
<span style="color: #BA36A5;">white</span>=<span style=
"color: #008000;">"\[\e[0;37m\]"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">bold colors</span>
<span style="color: #BA36A5;">BLACK</span>=<span style=
"color: #008000;">"\[\e[1;30m\]"</span>
<span style="color: #BA36A5;">RED</span>=<span style=
"color: #008000;">"\[\e[1;31m\]"</span>
<span style="color: #BA36A5;">GREEN</span>=<span style=
"color: #008000;">"\[\e[1;32m\]"</span>

<span style="color: #BA36A5;">reset</span>=<span style=
"color: #008000;">"\[\e[0m\]"</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">**** PS1 --- Default interaction prompt</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">**** PS2 --- Continuation interactive prompt</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">**** PS3 --- Prompt used by "select" inside shell script</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">**** PS4 --- Used by "set -x" to prefix tracing output</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">get line numbers when you run with `-x'</span>
<span style="color: #BA36A5;">PS4</span>=<span style=
"color: #008000;">'+'</span>${<span style=
"color: #BA36A5;">green</span>}<span style=
"color: #008000;">'[$0:${LINENO}]+ '</span>${<span style=
"color: #BA36A5;">reset</span>}
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">single quotes (otherwise, this line number is taken)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">If you are looking at performance issues, put `$SECONDS' in the PS4 prompt</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">as well</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">**** PROMPT_COMMAND</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">to be called just before the prompt is printed</span>
<span style="color: #006699;">precmd</span> ()
{
    <span style="color: #BA36A5;">RET</span>=$<span style=
"color: #BA36A5;">?</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set a color prompt (unless in Emacs)</span>
    <span style="color: #0000FF;">case</span> $<span style=
"color: #BA36A5;">TERM</span><span style="color: #0000FF;"> in</span>
        cygwin|xterm*|rxvt-unicode)
            <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">color_prompt</span>=yes
            ;;
        dumb)
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`M-x shell' under Cygwin Emacs</span>
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`M-x eshell' under EmacsW32</span>
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Tramp</span>
            <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">color_prompt</span>=no
            ;;
        emacs)
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`M-x shell' under EmacsW32</span>
            <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">color_prompt</span>=no
            ;;
        eterm-color)
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`M-x term' under Cygwin Emacs</span>
            <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">color_prompt</span>=no
            ;;
    <span style="color: #0000FF;">esac</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">colorful prompt, based on whether the previous command succeeded or not</span>
    <span style="color: #0000FF;">if</span> [ $<span style=
"color: #BA36A5;">RET</span> -eq 0 ]; <span style="color: #0000FF;">then</span>
        <span style="color: #BA36A5;">HILIT_RET</span>=${<span style=
"color: #BA36A5;">GREEN</span>}
    <span style="color: #0000FF;">else</span>
        <span style="color: #BA36A5;">HILIT_RET</span>=${<span style=
"color: #BA36A5;">RED</span>}
    <span style="color: #0000FF;">fi</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">replace the `$HOME' prefix by `~' in the current directory</span>
    <span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$HOME"</span> = <span style=
"color: #008000;">"${PWD:0:${#HOME}}"</span> ]; <span style=
"color: #0000FF;">then</span>
        <span style="color: #BA36A5;">myPWD</span>=<span style=
"color: #008000;">"~${PWD:${#HOME}}"</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #BA36A5;">myPWD</span>=$<span style=
"color: #BA36A5;">PWD</span>
    <span style="color: #0000FF;">fi</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">how many characters of the path should be kept</span>
    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">pwd_max_length</span>=15

    <span style="color: #0000FF;">if</span> [ ${#<span style=
"color: #BA36A5;">myPWD</span>} -gt $<span style=
"color: #BA36A5;">pwd_max_length</span> ]; <span style=
"color: #0000FF;">then</span>
        <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">pwd_offset</span>=$(( ${#<span style=
"color: #BA36A5;">myPWD</span>} - $<span style=
"color: #BA36A5;">pwd_max_length</span> ))
        <span style="color: #BA36A5;">myPWD</span>=<span style=
"color: #008000;">"...${myPWD:$pwd_offset:$pwd_max_length}"</span>
    <span style="color: #0000FF;">fi</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">prompt character</span>
    <span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$USERNAME"</span> = <span style=
"color: #008000;">"root"</span> ]; <span style="color: #0000FF;">then</span>
        <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">PROMPTCHAR</span>=<span style="color: #008000;">"#"</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">PROMPTCHAR</span>=<span style="color: #008000;">"$"</span>
    <span style="color: #0000FF;">fi</span>

    <span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$color_prompt"</span> = <span style=
"color: #008000;">"yes"</span> ]; <span style="color: #0000FF;">then</span>
        <span style="color: #BA36A5;">PS1</span>=<span style=
"color: #008000;">"${green}\u@\h${BLACK}:${yellow}${myPWD}${HILIT_RET} ${RET}${white}${PROMPTCHAR}${reset} "</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #BA36A5;">PS1</span>=<span style=
"color: #008000;">"\u@\h:${myPWD} ${RET}${PROMPTCHAR} "</span>
    <span style="color: #0000FF;">fi</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">execute the content of the `PROMPT_COMMAND' just before displaying the `PS1'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">variable (but don't confuse Tramp)</span>
[ $<span style="color: #BA36A5;">TERM</span> = <span style=
"color: #008000;">"dumb"</span> ] || <span style=
"color: #BA36A5;">PROMPT_COMMAND</span>=precmd
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-4-3-3" class="outline-4">
          <h4 id="sec-4-3-3"><span class="section-number-4">4.3.3</span>
          Command history</h4>

          <div class="outline-text-4" id="text-4-3-3">
            <p>Access and modify commands that you had previously typed at the
            command line.</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">history</span>
<span style="color: #BA36A5;">HISTFILE</span>=$<span style=
"color: #BA36A5;">HOME</span>/.bash_history <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">if paranoiac, `/dev/null'</span>
<span style="color: #BA36A5;">HISTSIZE</span>=1000
<span style="color: #BA36A5;">HISTFILESIZE</span>=1000
<span style="color: #BA36A5;">HISTIGNORE</span>=<span style=
"color: #008000;">"&amp;:[bf]g:exit"</span>
<span style="color: #BA36A5;">HISTCONTROL</span>=ignoredups
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-4-3-4" class="outline-4">
          <h4 id="sec-4-3-4"><span class="section-number-4">4.3.4</span>
          Term</h4>
        </div>

        <div id="outline-container-sec-4-3-5" class="outline-4">
          <h4 id="sec-4-3-5"><span class="section-number-4">4.3.5</span>
          Display</h4>
        </div>
      </div>

      <div id="outline-container-sec-4-4" class="outline-3">
        <h3 id="sec-4-4"><span class="section-number-3">4.4</span> Code</h3>

        <div class="outline-text-3" id="text-4-4">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** Source global rc file (if any)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">source global definitions if the session is interactive (to avoid problems</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">like "stdin: is not a tty" when ssh'ing to a remote machine)</span>
<span style="color: #0000FF;">if</span> ([ $(expr index <span style=
"color: #008000;">"$-"</span> i) -ne 0 ] &amp;&amp; [ -f /etc/bashrc ]); <span style="color: #0000FF;">then</span>
    . /etc/bashrc
<span style="color: #0000FF;">fi</span>
</pre>
          </div>

          <p>A common cause is <code>mesg y</code> in <code>/etc/bashrc</code>
          on the remote machine, hence the user has to try avoiding sourcing it
          (on the <b>remote</b> machine) in non-interactive sessions.</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** Default permissions</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">permissions on newly created files</span>
<span style="color: #006FE0;">umask</span> 022 <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">prevent new dirs and files from being group and world writable</span>

<span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$USERNAME"</span> = <span style=
"color: #008000;">"root"</span> ]; <span style="color: #0000FF;">then</span>
    <span style="color: #006FE0;">umask</span> 077  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">stricter</span>
<span style="color: #0000FF;">fi</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** Shell options</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">correct minor misspellings of cd pathnames</span>
shopt -s cdspell
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-5" class="outline-3">
        <h3 id="sec-4-5"><span class="section-number-3">4.5</span> Next</h3>

        <div class="outline-text-3" id="text-4-5">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 5 (info "(bashref)Shell Variables")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set MANPATH so it includes user's private man if it exists</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">do the same with MANPATH</span>
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">if [ -d $HOME/man ]; then</span>
<span style="color: #8D8D84;">#    </span><span style=
"color: #8D8D84; font-style: italic;">MANPATH=$HOME/man:"${MANPATH}"</span>
<span style="color: #8D8D84;">#    </span><span style=
"color: #8D8D84; font-style: italic;">export MANPATH</span>
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">fi</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">LANG="en_US.utf8"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">LC_CTYPE="en_US.utf8"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">LC_ALL="C"   # fixes the problem of strange characters in the man page</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> These should be set in `/etc/default/locale', via `sudo update-locale'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> Set DISPLAY?</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">colon separated list of directories to search for manual pages</span>
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">ifnset MANPATH "/usr/man"</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> don't define it like that: does not work under Ubuntu!</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">See `/etc/manpath.config'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Info readers (standalone + Emacs Info mode)</span>
<span style="color: #BA36A5;">INFOPATH</span>=<span style=
"color: #008000;">"/usr/share/info:$INFOPATH"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">include a trailing colon on `INFOPATH' to concatenate the Emacs</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`Info-default-directory-list' when searching for info files</span>
<span style="color: #BA36A5;">INFOPATH</span>=<span style=
"color: #008000;">"$HOME/src/emacs-w3m/doc:$INFOPATH"</span>
<span style="color: #BA36A5;">INFOPATH</span>=<span style=
"color: #008000;">"$HOME/src/gnus/texi:$INFOPATH"</span>
<span style="color: #BA36A5;">INFOPATH</span>=<span style=
"color: #008000;">"$HOME/Downloads/emacs/site-lisp/auctex-11.86/doc:$INFOPATH"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">INFOPATH="$HOME/texlive/2010/texmf/doc/info:$INFOPATH"</span>
<span style="color: #BA36A5;">INFOPATH</span>=<span style=
"color: #008000;">"$HOME/Public/Repositories/org-mode/doc:$INFOPATH"</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Functions to help us manage environment variables</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">setenv [VAR] [value] - set environment variable</span>
<span style="color: #006699;">setenv</span> () { <span style=
"color: #006FE0;">eval</span> $<span style=
"color: #BA36A5;">1</span>=<span style=
"color: #008000;">"\$2"</span> export $<span style=
"color: #BA36A5;">1</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">unsetenv [VAR] - unset environment variable</span>
<span style="color: #006699;">unsetenv</span> () { <span style=
"color: #006FE0;">unset</span> <span style="color: #008000;">"$@"</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ifnset [VAR] [value] - set environment variable only if not set yet</span>
<span style="color: #006699;">ifnset</span> () { <span style=
"color: #006FE0;">eval</span> $<span style=
"color: #BA36A5;">1</span>=<span style="color: #008000;">\$</span>{<span style=
"color: #BA36A5;">$</span>1-<span style=
"color: #008000;">"\$2"</span>} <span style=
"color: #006FE0;">export</span> $<span style="color: #BA36A5;">1</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ifnull [VAR] [value] - set environment variable if not set yet or if NULL</span>
<span style="color: #006699;">ifnull</span> () { <span style=
"color: #006FE0;">eval</span> $<span style=
"color: #BA36A5;">1</span>=<span style="color: #008000;">\$</span>{<span style=
"color: #BA36A5;">$</span>1:-<span style=
"color: #008000;">"\$2"</span>} <span style=
"color: #006FE0;">export</span> $<span style="color: #BA36A5;">1</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">append [VAR] [path] - append path separated by `:'</span>
<span style="color: #006699;">append</span> () { <span style=
"color: #006FE0;">eval</span> $<span style=
"color: #BA36A5;">1</span>=<span style="color: #008000;">\$</span>{<span style=
"color: #BA36A5;">$</span>1:+<span style=
"color: #008000;">\$</span><span style="color: #BA36A5;">$</span>1${<span style="color: #BA36A5;">2</span>:+:}}<span style="color: #008000;">\$</span><span style="color: #BA36A5;">2</span> export $<span style="color: #BA36A5;">1</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">prepend [VAR] [path] - prepend path separated by `:'</span>
<span style="color: #006699;">prepend</span> () { <span style=
"color: #006FE0;">eval</span> $<span style=
"color: #BA36A5;">1</span>=<span style="color: #008000;">\$</span><span style=
"color: #BA36A5;">2</span><span style="color: #008000;">\$</span>{<span style=
"color: #BA36A5;">$</span>1:+${<span style=
"color: #BA36A5;">2</span>:+:}<span style=
"color: #008000;">\$</span><span style=
"color: #BA36A5;">$</span>1} <span style="color: #006FE0;">export</span> $<span style="color: #BA36A5;">1</span>; }

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">showvalue [VAR]... - print out the value of variables given their name</span>
<span style="color: #006699;">showvalue</span> () { <span style=
"color: #0000FF;">for</span> i<span style=
"color: #0000FF;"> in</span> $<span style=
"color: #BA36A5;">*</span>; <span style=
"color: #0000FF;">do </span><span style="color: #006FE0;">eval</span> echo <span style="color: #008000;">"$i = \\\`\$$i\'"</span>; <span style="color: #0000FF;">done</span>; }
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-6" class="outline-3">
        <h3 id="sec-4-6"><span class="section-number-3">4.6</span> Source
        common files</h3>

        <div class="outline-text-3" id="text-4-6">
          <p><code>.commonshrc</code> contains miscellaneous definitions common
          to Bash and Zsh.</p>

          <p>An <b>alias</b> is a simple string substitution.</p>

          <p>By default, it is <b>not expanded in non-interactive shells</b>
          (scripts, and even functions called in an interactive shell!).</p>

          <p>In general, it should not do more than <b>change the default
          options of a command</b>.</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 4.2 or 6.6 Aliases</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">source common definitions</span>
<span style="color: #0000FF;">if</span> [ -r <span style=
"color: #008000;">"$HOME/.commonshrc"</span> ]; <span style=
"color: #0000FF;">then</span>
    . $<span style="color: #BA36A5;">HOME</span>/.commonshrc
<span style="color: #0000FF;">fi</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-7" class="outline-3">
        <h3 id="sec-4-7"><span class="section-number-3">4.7</span> Next</h3>

        <div class="outline-text-3" id="text-4-7">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ALTER the ORIGINAL meaning of existing commands (that scripts don't</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">expect to see modified!)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">df</span>=<span style="color: #008000;">'df -kTh'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">du</span>=<span style="color: #008000;">'du -kh'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">cp</span>=<span style=
"color: #008000;">'cp -i'</span>   <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">confirm copy over an existing file</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mv</span>=<span style=
"color: #008000;">'mv -i'</span>   <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">confirm move over an existing file</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">rm</span>=<span style=
"color: #008000;">'rm -i'</span>   <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">confirm removing file (prevent some accidental mistakes)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ssh</span>=<span style="color: #008000;">"ssh -C"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">more</span>=<span style="color: #008000;">"less"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">rmdir</span>=<span style="color: #008000;">"rm -fr"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">path</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">where</span>=<span style="color: #008000;">'type -all'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">start up Windows applications associated with a particular file extension</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">directly from the Bash prompt</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">start</span>=<span style=
"color: #008000;">"cmd /c start"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">start</span>=<span style=
"color: #008000;">"cygstart"</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">under Cygwin</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">lo</span>=<span style=
"color: #008000;">"locate -i"</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">case insensitive search</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">lg</span>=<span style=
"color: #008000;">"locate -r '.*' | grep -i"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mkall</span>=<span style=
"color: #008000;">"./configure &amp;&amp; make &amp;&amp; sudo make install"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">tvm</span>=<span style=
"color: #008000;">"tail -f /var/log/messages"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">sync files</span>
<span style="color: #BA36A5;">UNISON_BATCH_FLAGS</span>=<span style=
"color: #008000;">"-batch -ui text -xferbycopying"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">unisync</span>=<span style=
"color: #008000;">"unison mundaneum -logfile /dev/null"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">unisyncb</span>=<span style=
"color: #008000;">"unisync $UNISON_BATCH_FLAGS"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">sudo'ers</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">root</span>=<span style="color: #008000;">"su - root"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">force the radio to always sync at 2 Mbps, even if other speeds are available</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">iwconfigslow</span>=<span style=
"color: #008000;">"sudo iwconfig eth1 rate 2M"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">shortcuts</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">c</span>=<span style="color: #008000;">"clear"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">E</span>=<span style="color: #008000;">"env | sort"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">h</span>=<span style="color: #008000;">"history 25"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">j</span>=<span style="color: #008000;">"jobs -l"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">m</span>=$<span style="color: #BA36A5;">PAGER</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">p</span>=$<span style="color: #BA36A5;">PAGER</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">se</span>=<span style="color: #008000;">"sudoedit"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">X</span>=<span style=
"color: #008000;">"ssh-agent startx &amp;"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">z</span>=<span style="color: #008000;">"suspend"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">misc commands</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">dos2unix</span>=<span style="color: #008000;">"sed s/</span>
<span style="color: #008000;">//g"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">unix2dos</span>=<span style=
"color: #008000;">"sed s/\$/</span>
<span style="color: #008000;">/"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">hgrep</span>=<span style=
"color: #008000;">"history | grep"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">keyon</span>=<span style=
"color: #008000;">"ssh-add -t 10800"</span>  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">add identity</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">keyoff</span>=<span style=
"color: #008000;">"ssh-add -D"</span>       <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">remove all identities</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">keylist</span>=<span style=
"color: #008000;">"ssh-add -l"</span>      <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">list all identities</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">kill9</span>=<span style="color: #008000;">"kill -9"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">make an extract function!</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">tgz</span>=<span style="color: #008000;">"tar -zxvf"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">tbz2</span>=<span style="color: #008000;">"tar -jxvf"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">nfiles</span>=<span style=
"color: #008000;">"find . -type f | wc -l"</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ports</span>=<span style=
"color: #008000;">"netstat -alpe --ip"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">most used programs</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">web</span>=<span style=
"color: #008000;">"firefox &amp;"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">alias scan="nmap -sS -O"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">nm</span>=<span style=
"color: #008000;">"nmap -sS -O -PI -PT"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">portscan</span>=<span style=
"color: #008000;">"nmap -sT -PT -R "</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">anonymous wget (using Privoxy and Tor)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">aget</span>=<span style=
"color: #008000;">'wget --execute "http_proxy = http://127.0.0.1:8118" --proxy'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mirror</span>=<span style=
"color: #008000;">"wget -v --tries=0 --continue --force-directories --mirror --no-parent"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ngrep -i -w 'user|pass' port 110</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ngrep -d eth0 -i 'USER|PASS' tcp port 80</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ngrep google port 80</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ngrep -i 'rcpt to|mail from' tcp port smtp</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ngrep -q -t -wi "login" port 23</span>


<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 8.6 Programmable Completion</span>

complete -A helptopic help
complete -A hostname ssh telnet nmap rlogin ftp ping host traceroute nslookup rexec


<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** Misc functions</span>

<span style="color: #006699;">saneperms</span> ()
{
    find . -type d -print0 | xargs -0 chmod 755
    find . -type f -print0 | xargs -0 chmod ${<span style=
"color: #BA36A5;">1</span>:=644}
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># search for various types or README file in dir and display them in $PAGER</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">readme ()</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">{</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">local files</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">files=(./(#i)*(read*me|lue*m(in|)ut)*(ND))</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">if (($#files)); then</span>
<span style="color: #8D8D84;">#         </span><span style=
"color: #8D8D84; font-style: italic;">$PAGER $files</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">else</span>
<span style="color: #8D8D84;">#         </span><span style=
"color: #8D8D84; font-style: italic;">print 'No README files.'</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">fi</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">}</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># Get a file's basename, dirname, extension, etc</span>
<span style="color: #8D8D84;">#</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># get extension; everything after last '.'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ext=${file##*.}</span>
<span style="color: #8D8D84;">#</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># basename</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">basename=`basename "$file"`</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># everything after last '/'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">basename=${file##*/}</span>
<span style="color: #8D8D84;">#</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># dirname</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">dirname=`dirname "$file"`</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># everything before last '/'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">basename=${file%/*}</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> If possible, get the lines colored (exe in green) or suffixed (`*' for</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">exe, `/' for dir, etc.)</span>
<span style="color: #006699;">ff</span> ()
{
    find . -name $<span style=
"color: #BA36A5;">@</span> -print 2&gt;&amp;1 | grep -v <span style=
"color: #008000;">"find:"</span>
}

<span style="color: #006699;">safetmp</span> ()
{
    test -d $<span style="color: #BA36A5;">HOME</span> || <span style=
"color: #0000FF;">exit</span> 1
    test -d $<span style=
"color: #BA36A5;">HOME</span>/tmp || mkdir $<span style=
"color: #BA36A5;">HOME</span>/tmp
    <span style="color: #006FE0;">echo</span> $<span style=
"color: #BA36A5;">HOME</span>/tmp/safetmp.$(hostname).$(date +%s).$<span style=
"color: #BA36A5;">$</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copies my public key to the given server</span>
<span style="color: #006699;">sendkey</span> ()
{
    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">HOSTNAME</span>=<span style="color: #008000;">"$*"</span>
    scp $<span style=
"color: #BA36A5;">HOME</span>/.ssh/id_rsa.pub $<span style="color: #BA36A5;">USER</span>@$<span style="color: #BA36A5;">HOSTNAME</span>:/home/$<span style="color: #BA36A5;">DOMAIN</span>/$<span style="color: #BA36A5;">USER</span>/.ssh/authorized_keys
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">The PuTTY developers strongly recommend you use RSA</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copies my `.bashrc' to the given server</span>
<span style="color: #006699;">sendbash</span> ()
{
    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">HOSTNAME</span>=<span style="color: #008000;">"$*"</span>
    scp $<span style="color: #BA36A5;">HOME</span>/.bashrc $<span style=
"color: #BA36A5;">USER</span>@$<span style=
"color: #BA36A5;">HOSTNAME</span>:/home/$<span style=
"color: #BA36A5;">DOMAIN</span>/$<span style=
"color: #BA36A5;">USER</span>/.bashrc
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copies my public key and bashrc to the given server</span>
<span style="color: #006699;">rsetup</span> ()
{
    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">HOSTNAME</span>=<span style="color: #008000;">"$*"</span>
    sendkey $<span style="color: #BA36A5;">HOSTNAME</span>
    sendbash $<span style="color: #BA36A5;">HOSTNAME</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">gpg</span>
<span style="color: #006699;">searchkey</span> ()
{
    gpg --keyserver pgp.mit.edu --fingerprint --search-key <span style=
"color: #008000;">"$@"</span>;
}

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">*** GPG functions</span>

<span style="color: #006699;">encrypt</span> ()
{
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Use ascii armor</span>
    gpg -ac --no-options <span style="color: #008000;">"$1"</span>
}

<span style="color: #006699;">bencrypt</span> ()
{
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">No ascii armor</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Encrypt binary data. jpegs/gifs/vobs/etc.</span>
    gpg -c --no-options <span style="color: #008000;">"$1"</span>
}

<span style="color: #006699;">decrypt</span> ()
{
    gpg --no-options <span style="color: #008000;">"$1"</span>
}

<span style="color: #006699;">pe</span> ()
{
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Passphrase encryption program</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Created by Dave Crouse 01-13-2006</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Reads input from text editor and encrypts to screen.</span>
    clear
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"         Passphrase Encryption Program"</span>;
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"--------------------------------------------------"</span>; <span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span>;
    <span style="color: #006FE0;">which</span> $<span style=
"color: #BA36A5;">EDITOR</span> &amp;&gt;/dev/null
    <span style="color: #0000FF;">if</span> [ $<span style=
"color: #BA36A5;">?</span> != <span style=
"color: #008000;">"0"</span> ]; <span style="color: #0000FF;">then</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"It appears that you do not have a text editor set in your .bashrc file."</span>;
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"What editor would you like to use ? "</span> ;
        <span style="color: #006FE0;">read</span> EDITOR ; <span style=
"color: #006FE0;">echo</span> <span style="color: #008000;">""</span>;
    <span style="color: #0000FF;">fi</span>
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Enter the name/comment for this message :"</span>
    <span style="color: #006FE0;">read</span> comment
    $<span style="color: #BA36A5;">EDITOR</span> passphraseencryption
    gpg --armor --comment <span style=
"color: #008000;">"$comment"</span> --no-options --output
    passphraseencryption.gpg --symmetric passphraseencryption
    shred -u passphraseencryption ; clear
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Outputting passphrase encrypted message"</span>; <span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span> ; <span style="color: #006FE0;">echo</span> <span style="color: #008000;">""</span> ;
    cat passphraseencryption.gpg ; <span style=
"color: #006FE0;">echo</span> <span style=
"color: #008000;">""</span> ; <span style=
"color: #006FE0;">echo</span> <span style="color: #008000;">""</span> ;
    shred -u passphraseencryption.gpg ;
    <span style="color: #006FE0;">read</span> -p <span style=
"color: #008000;">"Hit enter to exit"</span> temp; clear
}

<span style="color: #006699;">keys</span> ()
{
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Opens up kgpg keymanager</span>
    kgpg -k
}

<span style="color: #006699;">encryptfile</span> ()
{
    zenity --title=<span style=
"color: #008000;">"zcrypt: Select a file to encrypt"</span> --file-selection &gt; zcrypt
    <span style="color: #BA36A5;">encryptthisfile</span>=<span style=
"color: #FF1493;">`cat zcrypt`</span>;rm zcrypt
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Use ascii armor</span>
    <span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">--no-options (for NO gui usage)</span>
    gpg -acq --yes ${<span style="color: #BA36A5;">encryptthisfile</span>}
    zenity --info --title <span style=
"color: #008000;">"File Encrypted"</span> --text <span style=
"color: #008000;">"$encryptthisfile has been encrypted"</span>
}

<span style="color: #006699;">decryptfile</span> ()
{
    zenity --title=<span style=
"color: #008000;">"zcrypt: Select a file to decrypt"</span> --file-selection &gt; zcrypt
    <span style="color: #BA36A5;">decryptthisfile</span>=<span style=
"color: #FF1493;">`cat zcrypt`</span>;rm zcrypt
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">NOTE: This will OVERWRITE existing files with the same name !!!</span>
    gpg --yes -q ${<span style="color: #BA36A5;">decryptthisfile</span>}
    zenity --info --title <span style=
"color: #008000;">"File Decrypted"</span> --text <span style=
"color: #008000;">"$encryptthisfile has been decrypted"</span>
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># have one SSH agent ready at all times</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">if [ "$SSH_AUTH_SOCK" = "" ]; then</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;"># check to see if there's an ssh-agent running</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">eval $(ssh-agent)</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">ssh-add</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">fi</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">*** Unison</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">unison the current working directory only</span>
<span style="color: #006699;">uwd</span> ()
{
    <span style="color: #BA36A5;">p</span>=$(<span style=
"color: #006FE0;">pwd</span> -P)
    <span style="color: #BA36A5;">p</span>=${<span style=
"color: #BA36A5;">p</span>#*$<span style=
"color: #BA36A5;">HOME</span>/my-unison-root/}
    <span style="color: #BA36A5;">p</span>=${<span style=
"color: #BA36A5;">p</span>#*$<span style=
"color: #BA36A5;">HOME</span>/my-unison-root}

    <span style="color: #0000FF;">if</span> [ -d <span style=
"color: #008000;">"$HOME/my-unison-root/$p"</span> ]; <span style=
"color: #0000FF;">then</span>
        unison profile-name-for-uwd -path <span style=
"color: #008000;">"$p"</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"$p is not a directory in a Unison hierarchy on this machine"</span>
    <span style="color: #0000FF;">fi</span>
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">look for definitions</span>
<span style="color: #006699;">jargon</span> ()
{
    <span style="color: #BA36A5;">BROWSER</span>=<span style=
"color: #008000;">"links"</span>
    <span style="color: #BA36A5;">JARGON_URL</span>=<span style=
"color: #008000;">"http://info.astrian.net/jargon/terms"</span>
    <span style="color: #0000FF;">for</span> i<span style=
"color: #0000FF;"> in</span> ${<span style=
"color: #BA36A5;">*</span>}; <span style="color: #0000FF;">do</span>
        ${<span style="color: #BA36A5;">BROWSER</span>} ${<span style=
"color: #BA36A5;">JARGON_URL</span>}/${<span style=
"color: #BA36A5;">i</span>}.html
    <span style="color: #0000FF;">done</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">acronym finder</span>
<span style="color: #006699;">acro</span> ()
{
    <span style="color: #0000FF;">if</span> [ $<span style=
"color: #BA36A5;">#</span> = 0 ]; <span style="color: #0000FF;">then</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Usage: $0 acronym"</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Purpose: expand an acronym"</span>
    <span style="color: #0000FF;">else</span>
       <span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">links "http://www.ucc.ie/cgi-bin/acronym?$1"</span>
        links <span style=
"color: #008000;">"http://www.acronymfinder.com/af-query.asp?String=exact&amp;Acronym=$1"</span>
    <span style="color: #0000FF;">fi</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">current weather forecasts</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">weather</span>=<span style=
"color: #008000;">"lynx term=vt100 http://weather.ec.gc.ca/forecast/city_e.html?yyz"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">nmap ()</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">{</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">echo "Enter port #"</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">read port</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">echo "Enter IP range"</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">read range</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">sudo nmap -sT -p $port -P0 -v -T 4 -oG dump-$port-${range////_}.txt $range</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">grep -i open dump-$port-${range////_}.txt</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">}</span>

<span style="color: #006699;">timesync</span> ()
{
    <span style="color: #0000FF;">if</span> [ $(id -u) = 0 ]; <span style=
"color: #0000FF;">then</span>
        ntpdate -u swisstime.ethz.ch
    <span style="color: #0000FF;">else</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Must be root"</span>
    <span style="color: #0000FF;">fi</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Searching for keyword(s) with Google</span>
<span style="color: #006699;">google</span> ()
{
    w3m <span style=
"color: #008000;">"http://www.google.com/search?q="</span>$<span style=
"color: #BA36A5;">1</span><span style="color: #008000;">""</span>;
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">immediately opens the first match</span>
<span style="color: #006699;">texman</span> ()
{
    locate $<span style=
"color: #BA36A5;">*</span> | grep pdf | grep texlive | head -1 | xargs open;
}

<span style="color: #006699;">texlist</span> ()
{
    locate $<span style="color: #BA36A5;">*</span> | grep <span style=
"color: #008000;">"\(pdf\|dvi\)"</span> | grep <span style=
"color: #008000;">"\ (texlive\|gwTeX\)"</span>;
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">http_proxy="http://hellman:8080"</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-8" class="outline-3">
        <h3 id="sec-4-8"><span class="section-number-3">4.8</span>
        Postamble</h3>

        <div class="outline-text-3" id="text-4-8">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Local Variables</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This is for the sake of Emacs.</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Local Variables:</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">mode: shell-script</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">mode: outline-minor</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">sh-shell: bash</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">End:</span>

<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.bashrc ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-5" class="outline-2">
      <h2 id="sec-5"><span class="section-number-2">5</span> Zsh specific</h2>

      <div class="outline-text-2" id="text-5"></div>

      <div id="outline-container-sec-5-1" class="outline-3">
        <h3 id="sec-5-1"><span class="section-number-3">5.1</span>
        Examples</h3>

        <div class="outline-text-3" id="text-5-1">
          <ul class="org-ul">
            <li><a href="http://aperiodic.net/phil/prompt/">Phil!’s ZSH
            Prompt</a></li>

            <li><a href=
            "http://stevelosh.com/blog/2010/02/my-extravagant-zsh-prompt/">My
            Extravagant Zsh Prompt</a> (with Git Repository Information)</li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-5-2" class="outline-3">
        <h3 id="sec-5-2"><span class="section-number-3">5.2</span>
        Preamble</h3>

        <div class="outline-text-3" id="text-5-2">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.zshrc --- Z Shell configuration file (for interactive shells)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copyright (C) 2009-2014 Fabrice Niessen</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Keywords: zsh, dotfile, config</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Install:</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">For Cygwin users: Create a shortcut for zsh by using the `mkzsh' command.</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Code:</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-3" class="outline-3">
        <h3 id="sec-5-3"><span class="section-number-3">5.3</span>
        Variables</h3>

        <div class="outline-text-3" id="text-5-3"></div>

        <div id="outline-container-sec-5-3-1" class="outline-4">
          <h4 id="sec-5-3-1"><span class="section-number-4">5.3.1</span> Search
          path</h4>

          <div class="outline-text-4" id="text-5-3-1">
            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">extend the PATH var</span>
<span style="color: #0000FF;">for</span> MAYBE_PATH<span style=
"color: #0000FF;"> in</span> <span style=
"color: #008000;">"$HOME/bin"</span> <span style="color: #008000;">\</span>
                  <span style=
"color: #008000;">"$HOME/expect"</span> <span style="color: #008000;">\</span>
                  <span style="color: #008000;">"$HOME/winbin"</span>;
<span style="color: #0000FF;">do</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`-d' or `-x'?</span>
    <span style="color: #0000FF;">if</span> [ -e $<span style=
"color: #BA36A5;">MAYBE_PATH</span> ]; <span style=
"color: #0000FF;">then</span>
        <span style="color: #BA36A5;">PATH</span>=$<span style=
"color: #BA36A5;">MAYBE_PATH</span>:$<span style="color: #BA36A5;">PATH</span>
    <span style="color: #0000FF;">fi</span>
<span style="color: #0000FF;">done</span>
</pre>
            </div>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Put the CWD (<code>.</code>) in
                PATH</b><br /></td>
              </tr>
            </table>

            <p>If you add the CWD to your PATH, just do it:</p>

            <ul class="org-ul">
              <li>for <b>non-root users</b>,</li>

              <li>as the <b>last entry</b> (so, the current directory is only
              checked as a last resort).</li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #BA36A5;">PATH</span>=$<span style=
"color: #BA36A5;">PATH</span>:.
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-5-3-2" class="outline-4">
          <h4 id="sec-5-3-2"><span class="section-number-4">5.3.2</span>
          Prompt</h4>

          <div class="outline-text-4" id="text-5-3-2">
            <p>Zsh expects that every character in <code>PS1</code> will
            advance the cursor one space. Wrap any non-printing escape
            sequences in <code>%{...%}</code>, and it should work. So use
            <code>%{\e[31m%}</code>, etc.</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 13 (info "(zsh)Prompt Expansion")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">some colors</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">BLACK</span>=$<span style=
"color: #008000;">'%{\e[1;30m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">RED</span>=$<span style=
"color: #008000;">'%{\e[1;31m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">green</span>=$<span style=
"color: #008000;">'%{\e[0;32m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">GREEN</span>=$<span style=
"color: #008000;">'%{\e[1;32m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">yellow</span>=$<span style=
"color: #008000;">'%{\e[0;33m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">white</span>=$<span style=
"color: #008000;">'%{\e[0;37m%}'</span>
<span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">reset</span>=$<span style=
"color: #008000;">'%{\e[0m%}'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Insert beep when last command has failed</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">custom prompt settings</span>
<span style="color: #BA36A5;">PROMPT</span>=<span style=
"color: #008000;">"$green%n@%m$BLACK:$yellow%2. %(?.$GREEN.$RED)%?$white%(!.#.$)$reset "</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">? - exit code of the previous command</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">n - user name</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">m - machine name</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">. - abbreviated pwd</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">! - su?</span>
</pre>
            </div>

            <p>The tricky part was getting the syntax for testing the exit
            code. The syntax is <code>%(x.true-string.false-string)</code>,
            where <code>x</code> is some arbitrary testing condition, in this
            case, <code>?</code> for exit codes. After the first dot, if the
            test passes, show true-string; if it fails, show false-string after
            the second dot.</p>

            <p><a href=
            "https://github.com/olivierverdier/zsh-git-prompt">https://github.com/olivierverdier/zsh-git-prompt</a></p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># prompt on the right hand side of the screen</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">RPROMPT="[%t]"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">git info</span>
. ~/Public/Repositories/git-prompt/zshrc.sh
<span style="color: #BA36A5;">RPROMPT</span>=<span style=
"color: #008000;">'$(git_super_status)'</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-5-3-3" class="outline-4">
          <h4 id="sec-5-3-3"><span class="section-number-4">5.3.3</span>
          Command history</h4>

          <div class="outline-text-4" id="text-5-3-3">
            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">history</span>
<span style="color: #BA36A5;">HISTFILE</span>=$<span style=
"color: #BA36A5;">HOME</span>/.histfile
<span style="color: #BA36A5;">HISTSIZE</span>=1000
<span style="color: #BA36A5;">SAVEHIST</span>=1000

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">append new history lines instead of overwriting (important for multiple</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">parallel Zsh sessions!)</span>
<span style="color: #006FE0;">setopt</span> appendhistory

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">don't save command more than once when occuring more often</span>
<span style="color: #006FE0;">setopt</span> HIST_IGNORE_DUPS

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Use the same history file for all sessions</span>
<span style="color: #006FE0;">setopt</span> SHARE_HISTORY
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-5-3-4" class="outline-4">
          <h4 id="sec-5-3-4"><span class="section-number-4">5.3.4</span>
          Term</h4>

          <div class="outline-text-4" id="text-5-3-4">
            <p>Sett the terminal type explicitly:</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">TERM</span>=xterm-256color
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-5-3-5" class="outline-4">
          <h4 id="sec-5-3-5"><span class="section-number-4">5.3.5</span>
          Display</h4>
        </div>
      </div>

      <div id="outline-container-sec-5-4" class="outline-3">
        <h3 id="sec-5-4"><span class="section-number-3">5.4</span>
        Aliasing</h3>

        <div class="outline-text-3" id="text-5-4">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">some global aliases (expand whatever their position)</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">L</span>=<span style=
"color: #008000;">"| less"</span> <span style="color: #8D8D84;">#######</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">M</span>=<span style="color: #008000;">"| most"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">G</span>=<span style=
"color: #008000;">'| grep -E'</span> <span style=
"color: #8D8D84;">######</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">W</span>=<span style=
"color: #008000;">'| wc -l'</span> <span style="color: #8D8D84;">####</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">H</span>=<span style=
"color: #008000;">'| head'</span> <span style="color: #8D8D84;">###</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">S</span>=<span style=
"color: #008000;">'| sort'</span> <span style="color: #8D8D84;">###</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">T</span>=<span style=
"color: #008000;">'| tail'</span> <span style="color: #8D8D84;">###</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">F</span>=<span style=
"color: #008000;">' | fmt -'</span> <span style="color: #8D8D84;">##</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">21</span>=<span style="color: #008000;">"2&gt;&amp;1"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">DN1</span>=<span style=
"color: #008000;">'1&gt; /dev/null'</span> <span style=
"color: #8D8D84;">#</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">DN2</span>=<span style=
"color: #008000;">'2&gt; /dev/null'</span> <span style=
"color: #8D8D84;">#</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">VM</span>=/var/log/messages
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A</span>=<span style="color: #008000;">'| awk'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A1</span>=<span style=
"color: #008000;">"| awk '{print \$1}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A2</span>=<span style=
"color: #008000;">"| awk '{print \$2}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A3</span>=<span style=
"color: #008000;">"| awk '{print \$3}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A4</span>=<span style=
"color: #008000;">"| awk '{print \$4}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A5</span>=<span style=
"color: #008000;">"| awk '{print \$5}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A6</span>=<span style=
"color: #008000;">"| awk '{print \$6}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A7</span>=<span style=
"color: #008000;">"| awk '{print \$7}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A8</span>=<span style=
"color: #008000;">"| awk '{print \$8}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">A9</span>=<span style=
"color: #008000;">"| awk '{print \$9}'"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">CA</span>=<span style="color: #008000;">"| cat -A"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">ND</span>=<span style=
"color: #008000;">'$(ls -d *(/om[1]))'</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">newest directory</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">NF</span>=<span style=
"color: #008000;">'$(ls *(.om[1]))'</span>    <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">newest file</span>

<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">EG</span>=<span style="color: #008000;">'|&amp; egrep'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">EH</span>=<span style="color: #008000;">'|&amp; head'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">EL</span>=<span style="color: #008000;">'|&amp; less'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">ET</span>=<span style="color: #008000;">'|&amp; tail'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">X</span>=<span style="color: #008000;">'| xargs'</span>

<span style="color: #006FE0;">alias</span> -- <span style=
"color: #BA36A5;">cdwd</span>=<span style="color: #008000;">'cd `pwd`'</span>
<span style="color: #006FE0;">alias</span> -- <span style=
"color: #BA36A5;">cwd</span>=<span style="color: #008000;">'echo $cwd'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">h</span>=<span style=
"color: #008000;">'history 1 | less +G'</span>
<span style="color: #006FE0;">alias</span> -- <span style=
"color: #BA36A5;">l</span>=<span style="color: #008000;">'ls -lg'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">find</span>=<span style=
"color: #008000;">'noglob find'</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-5" class="outline-3">
        <h3 id="sec-5-5"><span class="section-number-3">5.5</span> Ledger</h3>

        <div class="outline-text-3" id="text-5-5">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">LEDGER</span>=ledger
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">LEDGER_FILE</span>=/home/sva/Personal/Business/Accounting/LEDGER.dat

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">hledger print [REGEXP]... - show entries in Ledger format</span>
    <span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">! `hledger' is better than `ledger' in the sense that it does output</span>
    <span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">! 2 decimals whatever the figure, and that it does not output trailing</span>
    <span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">! spaces. There is no other difference (not even in indentation).</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">other problem with ledger: reports onto 81 columns when using other DATEFMT...</span>

<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">LG</span>=<span style=
"color: #008000;">"\$LEDGER -f \$LEDGER_FILE"</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">DATEFMT</span>=<span style=
"color: #008000;">'-y %Y/%m/%d'</span>  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for output</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">DAILY</span>=<span style=
"color: #008000;">'--period "daily"'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">DLM</span>=<span style=
"color: #008000;">'--display "d&gt;=[last month]"'</span>  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">display of last month</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">CLM</span>=<span style=
"color: #008000;">'-p "last month"'</span>  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">computed total of last month</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">D1</span>=<span style=
"color: #008000;">'--display "l&lt;=1" --depth 1'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">D2</span>=<span style=
"color: #008000;">'--display "l&lt;=2" --depth 2'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">BALANCE_SHEET</span>=<span style=
"color: #008000;">'^Assets ^Liabilities'</span>
<span style="color: #006FE0;">alias</span> -g <span style=
"color: #BA36A5;">PROFIT_LOSS</span>=<span style=
"color: #008000;">'^Expenses ^Income'</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">lastmonth</span>=<span style=
"color: #008000;">'LG reg TLM'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ledger -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ledger using `ledger', `hledger' or `beancount' (see `$LEDGER')</span>
<span style="color: #006699;">Ledger</span> ()
{
    <span style="color: #0000FF;">if</span> [ $<span style=
"color: #BA36A5;">#</span> -lt 1 ]; <span style="color: #0000FF;">then</span>
        cat &lt;&lt; EOF 1&gt;&amp;2
<span style=
"color: #0000ff; background-color: #EEF5FE;">Usage: $(basename $0) -f FILE [OPTIONS] [COMMAND [PATTERNS]]</span>
<span style=
"color: #0000ff; background-color: #EEF5FE;">    or $(basename $0) FILE   (if LEDGER=beancount)</span>
<span style="color: #0000ff; background-color: #EEF5FE;">EOF</span>
    <span style="color: #0000FF;">fi</span>

    <span style="color: #0000FF;">case</span> ${<span style=
"color: #BA36A5;">LEDGER</span>} <span style="color: #0000FF;">in</span>
        <span style="color: #008000;">"beancount"</span> )
            ;;

        * )   <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">default option</span>
            <span style="color: #006FE0;">shift</span>;  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for the useless (but expected) `-f'</span>
            ;;
    <span style="color: #0000FF;">esac</span>
    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">LEDGER_M4_FILE</span>=$<span style=
"color: #BA36A5;">1</span>; <span style="color: #006FE0;">shift</span>;

    <span style="color: #006FE0;">local</span> <span style=
"color: #BA36A5;">LEDGER_FILE</span>=sample-ledger.dat;
    <span style="color: #0000FF;">case</span> ${<span style=
"color: #BA36A5;">LEDGER</span>} <span style="color: #0000FF;">in</span>
        <span style="color: #008000;">"beancount"</span> )
            m4 -D <span style=
"color: #BA36A5;">LEDGER</span>=beancount ${<span style=
"color: #BA36A5;">LEDGER_M4_FILE</span>} |<span style=
"color: #008000;">\</span>
            sed -e <span style=
"color: #008000;">'s/\(.*\)(\(.*\)) \(.*\)/\1\3 | \2/g'</span> &gt; ${<span style="color: #BA36A5;">LEDGER_FILE</span>}
            bean-web ${<span style=
"color: #BA36A5;">LEDGER_FILE</span>} $<span style=
"color: #BA36A5;">@</span>   <span style=
"color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">beancount Web interface</span>
            ;;

        * )   <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">default option</span>
            m4 ${<span style=
"color: #BA36A5;">LEDGER_M4_FILE</span>} |<span style=
"color: #008000;">\</span>
            sed -e <span style=
"color: #008000;">'s/^@/;@/'</span> &gt; ${<span style=
"color: #BA36A5;">LEDGER_FILE</span>}
            ${<span style="color: #BA36A5;">LEDGER</span>} -f ${<span style=
"color: #BA36A5;">LEDGER_FILE</span>} $<span style="color: #BA36A5;">@</span>
            ;;
    <span style="color: #0000FF;">esac</span>
    rm ${<span style="color: #BA36A5;">LEDGER_FILE</span>}
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">cat file.ledger | sed -e 's/@check/;@check/' | xargs bean-web</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Use wrapper scripts around gpg with armor on (The --armor option means ascii</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">versus binary). You'll have to enter a password every time you want to run</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ledger.</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-6" class="outline-3">
        <h3 id="sec-5-6"><span class="section-number-3">5.6</span>
        Functions</h3>

        <div class="outline-text-3" id="text-5-6">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 9 (info "(zsh)Functions")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ll ()</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">{</span>
<span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">ls -lag $* | more</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">}</span>

<span style="color: #006699;">term</span> ()
{
    <span style="color: #006FE0;">setopt</span> noglob;
    <span style="color: #006FE0;">unset</span> TERMCAP;
    <span style="color: #006FE0;">eval</span> <span style=
"color: #FF1493;">`tset -s -I -Q - $*`</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">hgrep PATTERN - print the history lines matching PATTERN</span>
<span style="color: #006699;">hgrep</span> ()
{
    <span style="color: #006FE0;">history</span> 0 | grep $<span style=
"color: #BA36A5;">1</span>
}
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-7" class="outline-3">
        <h3 id="sec-5-7"><span class="section-number-3">5.7</span> Source
        common files</h3>

        <div class="outline-text-3" id="text-5-7">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 17 (info "(zsh)Shell Builtin Commands")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">source common aliases</span>
<span style="color: #0000FF;">if</span> [ -r $<span style=
"color: #BA36A5;">HOME</span>/.commonshrc ]; <span style=
"color: #0000FF;">then</span>
    . $<span style="color: #BA36A5;">HOME</span>/.commonshrc
<span style="color: #0000FF;">fi</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-8" class="outline-3">
        <h3 id="sec-5-8"><span class="section-number-3">5.8</span> Line
        Editor</h3>

        <div class="outline-text-3" id="text-5-8">
          <p>Useful keybindings:</p>

          <dl class="org-dl">
            <dt><code>M-q</code></dt>

            <dd>Type another command in the middle of a long command (look at
            man, etc.).</dd>

            <dt><code>M-.</code></dt>

            <dd>Recall the last argument of the previous command, and so
            on.</dd>

            <dt><code>C-r</code></dt>

            <dd>Do an interactive search across all of the history.</dd>
          </dl>

          <p>Useful commands:</p>

          <dl class="org-dl">
            <dt><code>vared VAR</code></dt>

            <dd>Interactively edit variable VAR.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 18 (info "(zsh)Zsh Line Editor")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">behave like Emacs when editing</span>
<span style="color: #006FE0;">bindkey</span> -e

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">mappings for `Ctrl-arrows' for word moving</span>
<span style="color: #006FE0;">bindkey</span> <span style=
"color: #008000;">';5C'</span> forward-word
<span style="color: #006FE0;">bindkey</span> <span style=
"color: #008000;">';5D'</span> backward-word

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">beep on </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s</span>
<span style="color: #006FE0;">setopt</span> beep

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">making zsh beep like Bash when backspacing on an empty command line</span>
<span style="color: #006699;">backward-delete-char-beep</span> ()
{
    <span style="color: #0000FF;">if</span> (( <span style=
"color: #BA36A5;">CURSOR</span> == 0 )); <span style=
"color: #0000FF;">then</span>
        zle beep
    <span style="color: #0000FF;">fi</span>
    zle backward-delete-char
}
zle -N backward-delete-char-beep
<span style="color: #006FE0;">bindkey</span> <span style=
"color: #008000;">"^?"</span> backward-delete-char-beep
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-9" class="outline-3">
        <h3 id="sec-5-9"><span class="section-number-3">5.9</span> Completion
        Widgets</h3>

        <div class="outline-text-3" id="text-5-9">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 19 (info "(zsh)Completion Widgets")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">load general completion</span>
<span style="color: #006FE0;">autoload</span> -Uz compinit &amp;&amp; compinit

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">display a list of completions when you give an ambiguous choice (like Bash)</span>
<span style="color: #006FE0;">setopt</span> autolist

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">zsh will attempt to complete wildcards by expanding them in the command line</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-10" class="outline-3">
        <h3 id="sec-5-10"><span class="section-number-3">5.10</span> Completion
        System</h3>

        <div class="outline-text-3" id="text-5-10">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** 20 (info "(zsh)Completion System")</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">case-insensitive completion</span>
zstyle <span style=
"color: #008000;">':completion:*'</span> matcher-list <span style=
"color: #008000;">'m:{a-zA-Z}={A-Za-z}'</span>

<span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$TERM"</span> != <span style=
"color: #008000;">"dumb"</span> ]; <span style="color: #0000FF;">then</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">eval "$(dircolors -b)"</span>
    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ls</span>=<span style=
"color: #008000;">'ls --color=always'</span>
<span style="color: #0000FF;">else</span>
    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ls</span>=<span style="color: #008000;">'ls -CF'</span>
<span style="color: #0000FF;">fi</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-11" class="outline-3">
        <h3 id="sec-5-11"><span class="section-number-3">5.11</span> Zsh
        Modules</h3>

        <div class="outline-text-3" id="text-5-11">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">coloring stderr</span>
<span style="color: #BA36A5;">STDERRRED</span>=$<span style=
"color: #008000;">'\e[031m'</span>
zmodload zsh/system
<span style="color: #006699;">color_err</span> () {
    <span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">sysread &amp; syswrite are part of `zsh/system'</span>
    emulate -LR zsh
    <span style="color: #0000FF;">while</span> sysread
    <span style="color: #0000FF;">do</span>
        syswrite -o 2 <span style=
"color: #008000;">"${STDERRRED}${REPLY}$terminfo[sgr0]"</span>
    <span style="color: #0000FF;">done</span>
}

<span style="color: #0000FF;">exec</span> 2&gt; &gt;( color_err )
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-5-12" class="outline-3">
        <h3 id="sec-5-12"><span class="section-number-3">5.12</span>
        Others</h3>

        <div class="outline-text-3" id="text-5-12">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">change directory given just path</span>
<span style="color: #006FE0;">setopt</span> autocd

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">use additional pattern matching features</span>
<span style="color: #006FE0;">setopt</span> extendedglob

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">unmatched patterns cause an </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span>
<span style="color: #006FE0;">setopt</span> nomatch

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">immediately report changes in background job status</span>
<span style="color: #006FE0;">setopt</span> notify
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Local Variables</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This is for the sake of Emacs.</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Local Variables:</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">mode: outline-minor</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">End:</span>

<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.zshrc ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-6" class="outline-2">
      <h2 id="sec-6"><span class="section-number-2">6</span> Common</h2>

      <div class="outline-text-2" id="text-6">
        <p>Everything in common between Bash and Z shell will come here.</p>
      </div>

      <div id="outline-container-sec-6-1" class="outline-3">
        <h3 id="sec-6-1"><span class="section-number-3">6.1</span>
        Preamble</h3>

        <div class="outline-text-3" id="text-6-1">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Hey Emacs, this is a -*- sh -*- file</span>
<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.commonshrc --- Common features between (Linux and Cygwin) Bash and Z Shell</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copyright (C) 2009-2014 Fabrice Niessen</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Keywords: bash, zsh, dotfile, config</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-2" class="outline-3">
        <h3 id="sec-6-2"><span class="section-number-3">6.2</span> Default
        editor</h3>

        <div class="outline-text-3" id="text-6-2">
          <p>Be sure one of these <b>editors</b> is <b>in your search
          path</b>!</p>

          <p>Note – Right now, I have instead hard-coded the path to Emacs in
          the <a href=
          "file://d:/Users/fni/bin/emacsclient">file://d:/Users/fni/bin/emacsclient</a>
          script.</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set the user's preferred text editor</span>
<span style="color: #0000FF;">for</span> editor<span style=
"color: #0000FF;"> in</span> emacsclientw emacsclient emacs vi; <span style=
"color: #0000FF;">do</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">find a suitable editor</span>
    <span style="color: #0000FF;">if</span> $(<span style=
"color: #006FE0;">which</span> $<span style=
"color: #BA36A5;">editor</span> &gt;&amp; /dev/null); <span style=
"color: #0000FF;">then</span>
        <span style="color: #0000FF;">case</span> $<span style=
"color: #BA36A5;">editor</span><span style="color: #0000FF;"> in</span>
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">emacsclient*)</span>
            <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;"># # doesn't bother waiting for a response</span>
            <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;"># export EDITOR="$editor --no-wait"</span>
            <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">export EDITOR="$editor -t"</span>
            <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">;;</span>
            *)
                <span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">EDITOR</span>=<span style="color: #008000;">"$editor"</span>
                ;;
        <span style="color: #0000FF;">esac</span>
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">e</span>=<span style="color: #008000;">"$EDITOR"</span>
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">edit</span>=<span style="color: #008000;">"$EDITOR"</span>
        <span style="color: #0000FF;">break</span>
    <span style="color: #0000FF;">fi</span>
<span style="color: #0000FF;">done</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> 2010-11-04 This causes problems when scp'ing .bash_profile (for</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">example) when this .bashrc is deployed onto the remote SSH server.</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">[ -z "$EDITOR" ] &amp;&amp; echo "No suitable editor found."</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">[ -z "$EDITOR" ] || showvalue EDITOR</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">use `$EDITOR' for programs wanting an editor</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">VISUAL</span>=<span style=
"color: #008000;">"$EDITOR"</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for crontab</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">CVSEDITOR</span>=<span style=
"color: #008000;">"$EDITOR"</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">SVN_EDITOR</span>=<span style=
"color: #008000;">"$EDITOR"</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">EDIT</span>=<span style="color: #008000;">"$EDITOR"</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #CC0000; background-color: #FFFF88;">ERROR</span><span style=
"color: #BA36A5;">_EDITOR</span>=<span style="color: #008000;">"$EDITOR"</span>
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">FCEDIT</span>=<span style=
"color: #008000;">"$EDITOR"</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for the fc (fix command) builtin command</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">e</span>=<span style=
"color: #008000;">"emacsclient -a emacs -n"</span>       <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">-n is essential part</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-3" class="outline-3">
        <h3 id="sec-6-3"><span class="section-number-3">6.3</span> Aliases</h3>

        <div class="outline-text-3" id="text-6-3">
          <p>Aliases are abbreviations or alternative names (usually mnemonics)
          for commands. They are commonly used to specify a few options to
          commands, and then include the rest of the command line.</p>

          <p>Aliases should usually be kept simple. If not, they should be
          converted to:</p>

          <ul class="org-ul">
            <li>shell functions, or</li>

            <li>shell scripts.</li>
          </ul>

          <p>An alias cannot have an argument like <code>$1</code>.</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Aliasing</span>

<span style="color: #BA36A5;">LS_OPTIONS</span>=<span style=
"color: #008000;">"$LS_OPTIONS --show-control-chars"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">enable color support of ls</span>
<span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$TERM"</span> != <span style=
"color: #008000;">"dumb"</span> ]; <span style="color: #0000FF;">then</span>

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># add my coloration scheme to directory listings</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">if [ -f $HOME/.dircolors ]; then</span>
    <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">eval "$(dircolors -b $HOME/.dircolors)"</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">else</span>
    <span style="color: #8D8D84;">#     </span><span style=
"color: #8D8D84; font-style: italic;">eval "$(dircolors -b)"</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">fi</span>

    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ls</span>=<span style=
"color: #008000;">'ls --color=auto'</span>
    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ll</span>=<span style=
"color: #008000;">"ls --color=yes --all --group-directories-first -l --human-readable --no-group"</span>
            <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">long listing and hidden files</span>
<span style="color: #0000FF;">fi</span>

<span style="color: #006FE0;">alias</span> -- ..=<span style=
"color: #008000;">'cd ..'</span>
<span style="color: #006FE0;">alias</span> ...=<span style=
"color: #008000;">'cd ../..'</span>
<span style="color: #006FE0;">alias</span> ....=<span style=
"color: #008000;">'cd ../../..'</span>
<span style="color: #006FE0;">alias</span> .....=<span style=
"color: #008000;">'cd ../../../..'</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">s</span>=sudo
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">w</span>=which
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">q</span>=<span style=
"color: #008000;">'clear &amp;&amp; exit'</span> <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`x' is left for X Server...</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">print PATH with each directory on a new line</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">path</span>=<span style=
"color: #008000;">'echo $PATH | sed -e "s/:/\n/g"'</span>

<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">apts</span>=<span style=
"color: #008000;">'aptitude search'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">apti</span>=<span style=
"color: #008000;">'sudo aptitude install --with-recommends'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">aptrm</span>=<span style=
"color: #008000;">'sudo aptitude remove'</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-4" class="outline-3">
        <h3 id="sec-6-4"><span class="section-number-3">6.4</span> Emacs /
        Org</h3>

        <div class="outline-text-3" id="text-6-4">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">em</span>=emacs-minimal
</pre>
          </div>

          <p>For branches for which we want to make some development, and keep
          in track with <code>master</code>:</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006699;">update_org</span> () {
    (   <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Directory changes made in a subshell do not carry over to the parent shell.</span>
        <span style="color: #006FE0;">cd</span> $<span style=
"color: #BA36A5;">HOME</span>/Public/Repositories/org-mode;
        git fetch --all --verbose <span style="color: #008000;">\</span>
            &amp;&amp; git rebase origin <span style="color: #008000;">\</span>
            &amp;&amp; make autoloads <span style="color: #008000;">\</span>
            &amp;&amp; <span style=
"color: #006FE0;">echo</span> DON<span style="color: #008000;">\'</span>T make clean <span style="color: #008000;">\</span>
            &amp;&amp; <span style=
"color: #006FE0;">echo</span> DON<span style="color: #008000;">\'</span>T make <span style="color: #008000;">\</span>
            &amp;&amp; <span style=
"color: #006FE0;">echo</span> DON<span style="color: #008000;">\'</span>T sudo make install <span style="color: #008000;">\</span>
            &amp;&amp; <span style=
"color: #006FE0;">echo</span> DON<span style="color: #008000;">\'</span>T make doc <span style="color: #008000;">\</span>
            &amp;&amp; make info <span style="color: #008000;">\</span>
            &amp;&amp; sudo make install-info <span style=
"color: #008000;">\</span>
            &amp;&amp; printf <span style=
"color: #008000;">"Running org_test, please wait (this can take a while)...\n"</span> <span style="color: #008000;">\</span>
            &amp;&amp; org_test 2&gt;&amp;1 &gt;/dev/null | tail -n 3
    )
}
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006699;">org_test</span> () {
    (
        <span style="color: #006FE0;">cd</span> $<span style=
"color: #BA36A5;">HOME</span>/Public/Repositories/org-mode;
        <span style=
"color: #BA36A5;">TMPDIR</span>=/tmp/org_test emacs -Q --batch -L lisp/ -L testing/ -l org-test.el --eval <span style="color: #008000;">'(setq org-confirm-babel-evaluate nil)'</span> -f org-test-run-batch-tests
    )
}
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #0000FF;">if</span> [ -d <span style=
"color: #008000;">"$HOME/Public/Repositories/org-bash-utils"</span> ]
<span style="color: #0000FF;">then</span>
    <span style="color: #BA36A5;">PATH</span>=<span style=
"color: #008000;">"$HOME/Public/Repositories/org-bash-utils:$PATH"</span>
    <span style="color: #006FE0;">source</span> $<span style=
"color: #BA36A5;">HOME</span>/Public/Repositories/org-bash-utils/org-alias
    <span style="color: #006FE0;">source</span> $<span style=
"color: #BA36A5;">HOME</span>/Public/Repositories/org-bash-utils/awk-alias
<span style="color: #0000FF;">fi</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-5" class="outline-3">
        <h3 id="sec-6-5"><span class="section-number-3">6.5</span> Grep</h3>

        <div class="outline-text-3" id="text-6-5">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">GREP_COLORS</span>=<span style=
"color: #008000;">"mt=01;33"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">grep through the running processes</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">pgrep</span>=<span style="color: #008000;">'pgrep -fl'</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-6" class="outline-3">
        <h3 id="sec-6-6"><span class="section-number-3">6.6</span> Pager</h3>

        <div class="outline-text-3" id="text-6-6">
          <p>Set the user’s preferred text pager (<code>cat</code>,
          <code>more</code> or <code>less</code>) that will be used by programs
          such as <code>man</code> or <code>git diff</code> to display
          pages.</p>

          <p><code>less</code> is faster than anything else around (with
          exception of possibly <code>more</code>, but this one feels really
          archaic).</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #BA36A5;">PAGER</span>=<span style=
"color: #008000;">"less"</span>
</pre>
          </div>

          <p>Without <code>--raw-control-chars</code>, <code>less</code>
          outputs the colors as raw escape codes, that is it does not
          <b>interpret colors</b>. With it, <code>git diff</code> finally shows
          colors…</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">tailoring `less'</span>
<span style="color: #BA36A5;">LESS</span>=<span style=
"color: #008000;">"--quit-at-eof --ignore-case --long-prompt --raw-control-chars"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">export LESS="-P ?c&lt;- .?f%f:Standard input.  ?n:?eEND:?p%pj\%.. .?c%ccol . ?mFile %i of %m  .?xNext\ %x.%t   Press h for help"</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-7" class="outline-3">
        <h3 id="sec-6-7"><span class="section-number-3">6.7</span>
        GraphicsMagick</h3>

        <div class="outline-text-3" id="text-6-7">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">GraphicsMagick</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">GIF</span>=<span style=
"color: #008000;">"gm convert -verbose -interlace LINE"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">thumb</span>=<span style=
"color: #008000;">"gm convert -geometry 100x100 -interlace LINE -verbose"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">region</span>=<span style=
"color: #008000;">'sleep 3; gm import selection$(date "+%Y%m%d%H%M%S").jpg'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">screenshot</span>=<span style=
"color: #008000;">'sleep 5; gm import -window root screen$(date "+%Y%m%d%H%M%S").jpg'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">window</span>=<span style=
"color: #008000;">'sleep 3; gm import -frame window$(date "+%Y%m%d%H%M%S").jpg'</span>

<span style="color: #006699;">gmresize</span> ()
{
    <span style="color: #BA36A5;">FILES</span>=<span style=
"color: #008000;">"$@"</span>
    <span style="color: #BA36A5;">SCALE</span>=<span style=
"color: #008000;">"1024x768"</span>
  <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for i in *.(gif|jpeg|jpg|png);</span>
    <span style="color: #0000FF;">for</span> i<span style=
"color: #0000FF;"> in</span> $<span style="color: #BA36A5;">FILES</span>
    <span style="color: #0000FF;">do</span>
        <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Processing image $i ..."</span>
        gm convert -scale $<span style=
"color: #BA36A5;">SCALE</span> <span style=
"color: #008000;">"$i"</span> $(basename <span style=
"color: #008000;">"$i"</span> .${<span style=
"color: #BA36A5;">i</span>##*.})-$<span style=
"color: #BA36A5;">SCALE</span>.${<span style="color: #BA36A5;">i</span>##*.}
        <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">obscure but useful string operations</span>
        <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">(see http://www.arachnoid.com/linux/shell_programming.html)</span>
    <span style="color: #0000FF;">done</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">find . -name "*png" | xargs -l -i basename -s ".png" "{}" | xargs -l -i  gm convert -quality 85% "{}.png" "{}.jpg"</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-8" class="outline-3">
        <h3 id="sec-6-8"><span class="section-number-3">6.8</span> MCit
        tools</h3>

        <div class="outline-text-3" id="text-6-8">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">sp</span>=sendpatch
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-9" class="outline-3">
        <h3 id="sec-6-9"><span class="section-number-3">6.9</span> Next</h3>

        <div class="outline-text-3" id="text-6-9">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># dirty (?) hack</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">alias killspell='kill `pidof hunspell`'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># use `pkill' (which is pgrep + kill in a single command)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">use `htop' instead of `top'</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> sudo aptitude install htop</span>
<span style="color: #0000FF;">if</span> $(<span style=
"color: #006FE0;">which</span> htop &gt;&amp; /dev/null); <span style=
"color: #0000FF;">then</span>
    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">top</span>=htop
<span style="color: #0000FF;">fi</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">show only my processes</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mytop</span>=<span style=
"color: #008000;">'top -u $USERNAME'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mytop</span>=<span style=
"color: #008000;">'htop -u $USERNAME'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">grep through the aliases</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">agrep</span>=<span style=
"color: #008000;">'alias | grep -i'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">directory history</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">dh</span>=<span style="color: #008000;">'dirs -v'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">play safe!</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">rm</span>=<span style="color: #008000;">'rm -i'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">mv</span>=<span style="color: #008000;">'mv -i'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">cp</span>=<span style="color: #008000;">'cp -i'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">display the matched pattern in color</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">grep</span>=<span style=
"color: #008000;">'grep --color'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">list all files modified in the last 24 hours (last full day)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">oneday</span>=<span style=
"color: #008000;">'find . -mtime -1 -print'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> my traceroute</span>
<span style="color: #0000FF;">if</span> $(<span style=
"color: #006FE0;">which</span> mtr &gt;&amp; /dev/null); <span style=
"color: #0000FF;">then</span>
    <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ping</span>=mtr
<span style="color: #0000FF;">fi</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">hping[2] (run as root!)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">myping</span>=<span style=
"color: #008000;">"hping2 -c 100 -2 -p 7 $1"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">myping2</span>=<span style=
"color: #008000;">"hping2 -d 500 -c 100 -2 -p 7 $1"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">030925 compare /proc with ps (against rootkits)</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">myps</span>=<span style=
"color: #008000;">"sudo ls -d /proc/* | grep '[0-9]' | wc -l ; sudo ps ax | wc -l"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">get gpg-key from keyserver</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">getkey</span>=<span style=
"color: #008000;">'gpg --keyserver keys.gnupg.net --recv-keys'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">040210 grep</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">g</span>=<span style=
"color: #008000;">'find . -type f -print0 | xargs -0 grep'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">search through files, ignoring .svn directories</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">svn_find</span>=<span style=
"color: #008000;">"find . -not \( -name .svn -prune \)"</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">function for grep'ing a string in every SVN revision of a file</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Usage: svn_grep_all_rev PATTERN FILE</span>
<span style="color: #006699;">svn_grep_all_rev</span>() {
    svn log $<span style="color: #BA36A5;">2</span> | perl -n -e <span style=
"color: #008000;">'print "$1\n" if m/^r(\d*)\s+/'</span> | (
        <span style="color: #0000FF;">while </span><span style=
"color: #006FE0;">read</span> revision; <span style="color: #0000FF;">do</span>
            printf <span style=
"color: #008000;">"\e[0;33m%s\e[0m\n"</span> <span style=
"color: #008000;">"Revision $revision:"</span>
            svn cat -r $<span style=
"color: #BA36A5;">revision</span> $<span style=
"color: #BA36A5;">2</span> | grep $<span style="color: #BA36A5;">1</span>
            printf <span style="color: #008000;">"\n"</span>
        <span style="color: #0000FF;">done</span>
    )
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">040319 send files via netcat</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">on sending side:</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">send() {j=$*; tar cpz ${j/%${!#}/}|nc -w 1 ${!#} 51330;}</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">send dir* $HOST</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Info:</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">${!#} gibt den letzten Parameter (den Hostnamen) zurück,</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">${j/%${!#}/} die übrigen (Liste der Dateien oder Verzeichnisse).</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">receive</span>=<span style=
"color: #008000;">'nc -vlp 51330 | tar xzvp'</span>


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">If I want to find out which lines in a file are duplicated and want to print</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">them, the following awk script helps:</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">awk 'seen[$0]++ == 1' &lt;filename&gt;</span>


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">honor embedded linefeeds when displaying packets</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">ngrep</span>=<span style=
"color: #008000;">'ngrep -W byline'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">echo my current external IP address</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">whatismyip</span>=<span style=
"color: #008000;">'curl -s http://whatismyip.org'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">shortcut to making executable</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">exe</span>=<span style="color: #008000;">'chmod +x'</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">chown current dir and subdirs</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">own</span>=<span style=
"color: #008000;">'sudo chown -R $USER'</span>


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Web radio stations</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">europe1</span>=<span style=
"color: #008000;">'mplayer http://vipicecast.yacast.net/europe1'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">europe2</span>=<span style=
"color: #008000;">'mplayer mms://vipmms9.yacast.fr/encodereurope2'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">nrj</span>=<span style=
"color: #008000;">'mplayer mms://vipnrj.yacast.fr/encodernrj'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">rtl</span>=<span style=
"color: #008000;">'mplayer http://streaming.radio.rtl.fr/rtl-1-44-96'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">rtl2</span>=<span style=
"color: #008000;">'mplayer http://streaming.radio.rtl.fr/rtl2-1-44-96'</span>


<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">off</span>=<span style=
"color: #008000;">'sudo shutdown -h now'</span>


<span style="color: #0000FF;">case</span> $(uname -s) <span style=
"color: #0000FF;">in</span>
    Linux*)
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">vpnup</span>=<span style=
"color: #008000;">'sudo test; exec sudo openvpn --config $HOME/.hide/OpenVPN-config/mcbe.ovpn --writepid /tmp/openvpn.pid &amp;'</span>  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">--daemon'</span>
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">vpndown</span>=<span style=
"color: #008000;">'sudo kill -INT `cat /tmp/openvpn.pid`'</span>
        ;;

    CYGWIN*)
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">vpnup</span>=<span style=
"color: #008000;">'cd $HOME/.hide/OpenVPN-config; openvpn --config mcbe.ovpn --writepid c:/cygwin/tmp/openvpn.pid &amp;'</span>  <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">--daemon'</span>
        <span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">vpndown</span>=<span style=
"color: #008000;">'killall openvpn'</span>
        ;;
<span style="color: #0000FF;">esac</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">make `du' human readable</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">du</span>=<span style="color: #008000;">'du -h'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">du1</span>=<span style=
"color: #008000;">'du -h --max-depth=1'</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">dus</span>=<span style=
"color: #008000;">'du -ms * | sort -rn'</span>  <span style=
"color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ordered by size</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">make `df' human readable</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">df</span>=<span style="color: #008000;">'df -h'</span>


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`unp' is for archive extract</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">dir</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">back</span>=<span style="color: #008000;">"cd -"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">home</span>=<span style="color: #008000;">"cd $HOME"</span>


<span style="color: #006FE0;">export</span> <span style=
"color: #BA36A5;">GS_OPTIONS</span>=<span style=
"color: #008000;">"-sPAPERSIZE=a4"</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">pdfmerge</span>=<span style=
"color: #008000;">"gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=./finished.pdf"</span> <span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">pdfjoin</span>
<span style="color: #006FE0;">alias</span> <span style=
"color: #BA36A5;">booklet</span>=<span style=
"color: #008000;">"psbook | psnup -2 | pstops '2:0,1U(21cm,29.7cm)'"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">for Win32, choose gswin32c</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-10" class="outline-3">
        <h3 id="sec-6-10"><span class="section-number-3">6.10</span>
        Functions</h3>

        <div class="outline-text-3" id="text-6-10">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Functions</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">list all files modified today only (since start of day only, i.e. 00:00)</span>
<span style="color: #006699;">today</span> ()
{
    touch -t <span style=
"color: #FF1493;">`date +%m%d0000`</span> /tmp/$<span style=
"color: #BA36A5;">$</span>
    find . -type f -newer /tmp/$<span style="color: #BA36A5;">$</span>
    rm -f /tmp/$<span style="color: #BA36A5;">$</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ff PATTERN - find file named PATTERN</span>
<span style="color: #006699;">ff</span> ()
{
    find . -name $<span style="color: #BA36A5;">1</span> -print
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">files PATH - list files in PATH</span>
<span style="color: #006699;">files</span> ()
{
    find $<span style="color: #BA36A5;">1</span> -type f -print
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">line N FILE - show line N of FILE</span>
<span style="color: #006699;">line</span> ()
{
    sed -n <span style="color: #008000;">"$1 p"</span> $<span style=
"color: #BA36A5;">2</span>
}
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-11" class="outline-3">
        <h3 id="sec-6-11"><span class="section-number-3">6.11</span>
        Emacsclient</h3>

        <div class="outline-text-3" id="text-6-11">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ec FILE - open FILE in a running Emacs</span>
<span style="color: #006699;">ec</span> ()
{
    emacsclient --no-wait <span style="color: #008000;">"$1"</span>
}
</pre>
          </div>

          <p>I connect to the server with either a terminal or a GUI client
          like this:</p>

          <p>alias et=emacsclient -t # new GUI frame alias ec=emacsclient -c #
          new terminal frame</p>
        </div>
      </div>

      <div id="outline-container-sec-6-12" class="outline-3">
        <h3 id="sec-6-12"><span class="section-number-3">6.12</span> Other</h3>

        <div class="outline-text-3" id="text-6-12">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">clean [-r] - remove useless files (recursively)</span>
<span style="color: #006699;">clean</span> ()
{
    <span style="color: #0000FF;">if</span> [ <span style=
"color: #008000;">"$1"</span> = <span style=
"color: #008000;">"-r"</span> ]; <span style="color: #0000FF;">then</span>
        find . <span style="color: #008000;">\(</span> -name <span style=
"color: #008000;">"#*"</span> -o -name <span style=
"color: #008000;">"*~"</span> -o -name <span style=
"color: #008000;">".*~"</span> -o <span style="color: #008000;">\</span>
            -name <span style=
"color: #008000;">"*.~[0-9]*~"\ </span>-o -name <span style=
"color: #008000;">".*.~[0-9]*~"</span> -o <span style=
"color: #008000;">\</span>
            -name <span style=
"color: #008000;">"*.~BASE~"</span> -o -name <span style=
"color: #008000;">".*.~BASE~"</span> <span style=
"color: #008000;">\)</span> -ok rm <span style=
"color: #008000;">"{}"</span> <span style="color: #008000;">";"</span>
    <span style="color: #0000FF;">else</span>
        rm -i <span style=
"color: #008000;">\#</span>* *~ .*~ *.~[0-9]*~ .*.~[0-9]*~ *.~BASE~ .*.~BASE~
    <span style="color: #0000FF;">fi</span>
}

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">swap FILE1 FILE2 - swap FILE1 and FILE2</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Useful when you want to try a config file obtained from elsewhere, and also</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">keep the old version.</span>
<span style="color: #006699;">swap</span> ()
{
    <span style="color: #0000FF;">if</span> [ $<span style=
"color: #BA36A5;">#</span> != 2 ]; <span style="color: #0000FF;">then</span>
        <span style="color: #0000FF;">return</span> 1
    <span style="color: #0000FF;">fi</span>
    <span style="color: #BA36A5;">tmpfile</span>=/tmp/.swapper.$<span style=
"color: #BA36A5;">$</span>.$<span style="color: #BA36A5;">RANDOM</span>
    mv -f $<span style="color: #BA36A5;">1</span> $<span style=
"color: #BA36A5;">tmpfile</span>
    mv -f $<span style="color: #BA36A5;">2</span> $<span style=
"color: #BA36A5;">1</span>
    mv -f $<span style="color: #BA36A5;">tmpfile</span> $<span style=
"color: #BA36A5;">2</span>
    <span style="color: #0000FF;">return</span> 0
}


<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">** Networking toolbox</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">localnet - find the local network in CIDR notation</span>
<span style="color: #006699;">localnet</span> ()
{
    <span style=
"color: #BA36A5;">IP_ADDRESS</span>=$(ifconfig | grep <span style=
"color: #008000;">"inet addr:"</span> | head -n 1 | sed <span style=
"color: #008000;">"s/.*addr:\([0-9.]*\).*/\1/"</span>)
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">we could use `nm-tool' from `network-manager'</span>

    <span style="color: #BA36A5;">NETMASK</span>=$(ifconfig | grep <span style=
"color: #008000;">"inet addr:"</span> | head -n 1 | sed <span style=
"color: #008000;">"s/.*Mask:\([0-9.]*\).*/\1/"</span>)

    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">calculate network value</span>
    <span style="color: #006FE0;">echo</span> $(ipcalc -n -b $<span style=
"color: #BA36A5;">IP_ADDRESS</span> $<span style=
"color: #BA36A5;">NETMASK</span> | grep Network | awk <span style=
"color: #008000;">'{print $2}'</span>)
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">whoisonline [TARGET] - list hosts that are online</span>
<span style="color: #006699;">whoisonline</span> ()
{
    <span style="color: #006FE0;">local</span> net
    <span style="color: #0000FF;">if</span> [ -n <span style=
"color: #008000;">"$1"</span> ]; <span style="color: #0000FF;">then</span>
        <span style="color: #BA36A5;">net</span>=<span style=
"color: #008000;">"$1"</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #BA36A5;">net</span>=$(localnet)
    <span style="color: #0000FF;">fi</span>
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Discovering online hosts in $net..."</span>
    sudo nmap -sP $<span style="color: #BA36A5;">net</span> | awk <span style=
"color: #008000;">'/Host / &amp;&amp; / up/ { print $0; }'</span>
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">localps [TARGET] - list open ports on hosts that are online</span>
<span style="color: #006699;">localps</span> ()
{
    <span style="color: #006FE0;">local</span> hostip
    <span style="color: #006FE0;">local</span> t1
    <span style="color: #006FE0;">local</span> t2
    <span style="color: #006FE0;">local</span> t3

    <span style="color: #006FE0;">local</span> net
    <span style="color: #0000FF;">if</span> [ -n <span style=
"color: #008000;">"$1"</span> ]; <span style="color: #0000FF;">then</span>
        <span style="color: #BA36A5;">net</span>=<span style=
"color: #008000;">"$1"</span>
    <span style="color: #0000FF;">else</span>
        <span style="color: #BA36A5;">net</span>=$(localnet)
    <span style="color: #0000FF;">fi</span>

    <span style="color: #0000FF;">for</span> hostip<span style=
"color: #0000FF;"> in</span> $(nmap -sP $<span style=
"color: #BA36A5;">net</span> | grep -E <span style=
"color: #008000;">'Host .* up'</span> | cut -d <span style=
"color: #008000;">" "</span> -f2-2);
    <span style="color: #0000FF;">do</span>
        <span style="color: #BA36A5;">t1</span>=$(ping -c 4 $<span style=
"color: #BA36A5;">hostip</span> | grep -e PING | cut -d <span style=
"color: #008000;">" "</span> -f1-2 | cut -d <span style=
"color: #008000;">" "</span> -f2-4) ;
        <span style="color: #BA36A5;">t2</span>=$(ping -c 4 $<span style=
"color: #BA36A5;">hostip</span> | grep -e rtt | cut -d <span style=
"color: #008000;">"/"</span> -f5-5) ;
        <span style="color: #BA36A5;">t3</span>=$(sudo nmap -sS $<span style=
"color: #BA36A5;">hostip</span> | grep <span style=
"color: #008000;">" open "</span>) ;
        <span style="color: #006FE0;">echo</span> -e $<span style=
"color: #BA36A5;">t1</span> <span style=
"color: #008000;">" "</span> $<span style=
"color: #BA36A5;">t2</span> <span style=
"color: #008000;">"ms\n"</span> $<span style=
"color: #BA36A5;">t3</span> <span style="color: #008000;">"\n"</span>;
    <span style="color: #0000FF;">done</span>
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">watchport HOST PORT - watch TCP port PORT on machine HOST</span>
<span style="color: #006699;">watchport</span> ()
{
    <span style="color: #0000FF;">while </span><span style=
"color: #006FE0;">true</span>; <span style=
"color: #0000FF;">do</span> clear; nmap $<span style=
"color: #BA36A5;">1</span> -PN -p $<span style=
"color: #BA36A5;">2</span>; sleep 5; <span style="color: #0000FF;">done</span>
}


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">rdns [TARGET] - perform reverse DNS lookups</span>
<span style="color: #006699;">rdns</span> ()
{
    <span style="color: #006FE0;">local</span> net
    <span style="color: #0000FF;">if</span> [ -n <span style=
"color: #008000;">"$1"</span> ]; <span style="color: #0000FF;">then</span>
      <span style="color: #BA36A5;">net</span>=<span style=
"color: #008000;">"$1"</span>
    <span style="color: #0000FF;">else</span>
      <span style="color: #BA36A5;">net</span>=$(localnet)
    <span style="color: #0000FF;">fi</span>
    <span style="color: #006FE0;">echo</span> <span style=
"color: #008000;">"Performing reverse DNS lookups in $net..."</span>
    nmap -R -sL $<span style="color: #BA36A5;">net</span> |<span style=
"color: #008000;">\</span>
    awk <span style=
"color: #008000;">'{if ($3 != "not") print "Host " $3 " is " $2}'</span> | grep <span style="color: #008000;">'('</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">You could add "--dns-servers x.x.x.x" after the "-sL" if you need the</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">lookups to be performed on a specific DNS server.</span>
}
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-13" class="outline-3">
        <h3 id="sec-6-13"><span class="section-number-3">6.13</span>
        Postamble</h3>

        <div class="outline-text-3" id="text-6-13">
          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This is for the sake of Emacs.</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Local Variables:</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ispell-local-dictionary: "en_US"</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">End:</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">.commonshrc ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-7" class="outline-2">
      <h2 id="sec-7"><span class="section-number-2">7</span> InputRC</h2>

      <div class="outline-text-2" id="text-7">
        <p>This file controls the behavior of line input editing for programs
        that use the Gnu Readline library. Existing programs include FTP, Bash,
        and Gdb.</p>

        <div class="org-src-container">
          <pre class="src src-sh">
<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.inputrc --- my Readline Init File</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Copyright (C) 2005-2014 Fabrice Niessen</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Keywords: readline, dotfile, config</span>

<span style="color: #8D8D84;">#    </span><span style=
"color: #8D8D84; font-style: italic;">_                   _</span>
<span style="color: #8D8D84;">#   </span><span style=
"color: #8D8D84; font-style: italic;">(_)_ __  _ __  _   _| |_ _ __ ___</span>
<span style="color: #8D8D84;">#   </span><span style=
"color: #8D8D84; font-style: italic;">| | '_ \| '_ \| | | | __| '__/ __|</span>
<span style="color: #8D8D84;">#  </span><span style=
"color: #8D8D84; font-style: italic;">_| | | | | |_) | |_| | |_| | | (__</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">(_)_|_| |_| .__/ \__,_|\__|_|  \___|</span>
<span style="color: #8D8D84;">#           </span><span style=
"color: #8D8D84; font-style: italic;">|_|</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This file is free software; you can redistribute it and/or</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">modify it under the terms of the GNU General Public License as</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">published by the Free Software Foundation; either version 2 of</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">the License, or (at your option) any later version.</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This file is distributed in the hope that it will be</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">useful, but WITHOUT ANY WARRANTY; without even the implied</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">PURPOSE.  See the GNU General Public License for more details.</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">You should have received a copy of the GNU General Public</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">License along with this file; if not, write to the Free</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">MA 02111-1307, USA.</span>

<span style="color: #8D8D84;">#</span><span style=
"color: #8D8D84; font-style: italic;">* Code:</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">modify to taste</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">first, include any system-wide settings (ignored if one has his own</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">`.inputrc')</span>
$<span style="color: #BA36A5;">include</span> /etc/skel/.inputrc
$<span style="color: #BA36A5;">include</span> /etc/inputrc

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">behave like Emacs when editing</span>
<span style="color: #006FE0;">set</span> editing-mode emacs
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-a        Start of line</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-e        End of line</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-f        Forward one character</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-b        Backward one character</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-d        Delete one character</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-k        Kill line</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-p        Previous command in history</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-n        Next command in history</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-r        Search for command in history</span>
    <span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Ctrl-i/TAB    File name completion</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">some defaults / modifications for the Emacs mode</span>
$<span style="color: #BA36A5;">if</span> <span style=
"color: #BA36A5;">mode</span>=emacs

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">mappings for "Alt-arrow keys" for Cygwin on Windows</span>
<span style="color: #008000;">"\e\e[C"</span>: forward-word
<span style="color: #008000;">"\e\e[D"</span>: backward-word

$<span style="color: #BA36A5;">endif</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">ignore case while completing</span>
<span style="color: #006FE0;">set</span> completion-ignore-case on

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># will display all alternatives for completion after one tab keypress</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set show-all-if-ambiguous on</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">#* get Bash to display accented characters (Emacs *Meta Key* Problems in XTerm)</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># allow iso-latin1 characters to be inserted rather than converted to</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># prefix-meta sequences</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set convert-meta off</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># don't strip characters to 7 bits when reading</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set input-meta on</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># (synonym of 'meta-flag')</span>

<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># display characters with the eighth bit set directly rather than as</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;"># meta-prefixed characters</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">set output-meta on</span>


<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">This is for the sake of Emacs.</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">Local Variables:</span>
<span style="color: #8D8D84;"># </span><span style=
"color: #8D8D84; font-style: italic;">End:</span>

<span style="color: #8D8D84;">## </span><span style=
"color: #8D8D84; font-style: italic;">.inputrc ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-8" class="outline-2">
      <h2 id="sec-8"><span class="section-number-2">8</span> Install
      environment</h2>

      <div class="outline-text-2" id="text-8">
        <p>Symlink the files.</p>

        <div class="org-src-container">
          <pre class="src src-sh">
ln -f -s $(<span style=
"color: #006FE0;">pwd</span>)/../src/.bashrc        ~/.bashrc
ln -f -s $(<span style=
"color: #006FE0;">pwd</span>)/../src/.bash_profile  ~/.bash_profile
ln -f -s $(<span style=
"color: #006FE0;">pwd</span>)/../src/.commonshrc    ~/.commonshrc
ln -f -s $(<span style=
"color: #006FE0;">pwd</span>)/../src/.inputrc       ~/.inputrc
ln -f -s $(<span style=
"color: #006FE0;">pwd</span>)/../src/.zshrc         ~/.zshrc
</pre>
        </div>

        <p>Or something like…</p>

        <div class="org-src-container">
          <pre class="src src-sh">
<span style="color: #0000FF;">if</span> [ -d <span style=
"color: #008000;">"$HOME/src/shellrc/src"</span> ]
<span style="color: #0000FF;">then</span>
    <span style="color: #BA36A5;">PATH</span>=<span style=
"color: #008000;">"$HOME/src/shellrc/src:$PATH"</span>
<span style="color: #0000FF;">fi</span>
</pre>
        </div>
      </div>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="footer">
      <div id="copyright">
        Copyright © Fabrice Niessen
      </div>
    </div>
  </div>
</body>
</html>
